<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="匠寵 - 從台灣夜市到健康餐桌，手作零食 × 循環經濟 × 健康訂閱，為你的毛孩提供最好的生活品質">
    <title>匠寵 - 寵物手作零食 × 循環經濟 × 智能訂閱</title>
    <!-- 開發環境：強制禁用緩存 -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Last-Modified" content="0">
    
    <!-- Tailwind CSS (開發環境 - 生產環境請使用本地構建) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // 開發環境：隱藏 Tailwind CDN 警告
        if (window.tailwind && window.tailwind.config) {
            // 保持原有的 tailwind.config
        }
        // 隱藏控制台警告（僅開發環境）
        const originalWarn = console.warn;
        console.warn = function(...args) {
            if (args[0] && typeof args[0] === 'string' && args[0].includes('cdn.tailwindcss.com should not be used in production')) {
                // 隱藏這個警告
                return;
            }
            originalWarn.apply(console, args);
        };
    </script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts - 可愛字體 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Lottie Animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- 全局配置 -->
    <script src="js/config.js"></script>
    
    <!-- API 客戶端 (後端整合) -->
    <script src="js/api-client.js"></script>
    
    <!-- 數據管理系統 -->
    <script src="js/data-store.js"></script>
    <script src="js/mock-data.js"></script>
    
    <!-- 功能模块 -->
    <script src="js/user-auth.js"></script>
    <script src="js/front-products.js"></script>
    <script src="js/homepage-config.js"></script>
    <script src="js/member-favorites.js"></script>
    
    <!-- Local Cart System -->
    <script src="js/local-cart.js" defer></script>
    
    <!-- 移除所有 logo 和腳掌圖標 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 移除整個 logo 區域（包括文字）
            const mainLogo = document.querySelector('#main-logo');
            if (mainLogo) {
                mainLogo.remove();
            }
            
            // 移除所有包含「匠寵」文字的 logo 連結
            const logoLinks = document.querySelectorAll('nav a[href="index.html"], a#main-logo, .logo, [class*="logo"]');
            logoLinks.forEach(function(link) {
                const text = link.textContent || link.innerText || '';
                if (text.includes('匠寵') || link.id === 'main-logo' || link.classList.contains('logo')) {
                    link.remove();
                }
            });
            
            // 移除所有 logo SVG、圖片和元素
            const logoSvgs = document.querySelectorAll('#main-logo, .logo, [class*="logo"], nav svg, nav img[src*="logo"], nav a:has(span)');
            logoSvgs.forEach(function(element) {
                if (element.closest('#main-logo') || element.closest('.logo') || 
                    (element.getAttribute && element.getAttribute('src') && element.getAttribute('src').includes('logo')) ||
                    (element.textContent && element.textContent.includes('匠寵') && element.tagName === 'A')) {
                    element.remove();
                }
            });
            
            // 移除所有腳掌圖標
            const pawIcons = document.querySelectorAll('.fa-paw, i.fa-paw, [class*="fa-paw"], [class*="paw"]');
            pawIcons.forEach(function(icon) {
                icon.remove();
            });
            
            // 移除包含腳掌圖標的容器
            const pawContainers = document.querySelectorAll('div, span');
            pawContainers.forEach(function(container) {
                if (container.querySelector && container.querySelector('.fa-paw, i.fa-paw')) {
                    const paw = container.querySelector('.fa-paw, i.fa-paw');
                    if (paw && container.children.length === 1) {
                        container.remove();
                    } else if (paw) {
                        paw.remove();
                    }
                }
            });
            
            // 持續監控，防止動態添加的 logo 和腳掌圖標
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    mutation.addedNodes.forEach(function(node) {
                        if (node.nodeType === 1) { // Element node
                            // 移除 logo 元素
                            if (node.id === 'main-logo' || node.classList.contains('logo') || 
                                (node.textContent && node.textContent.includes('匠寵') && node.tagName === 'A')) {
                                node.remove();
                            }
                            // 移除 logo SVG 和圖片
                            if (node.tagName === 'SVG' && (node.closest('#main-logo') || node.closest('.logo'))) {
                                node.remove();
                            }
                            if (node.tagName === 'IMG' && node.getAttribute('src') && node.getAttribute('src').includes('logo')) {
                                node.remove();
                            }
                            // 移除腳掌圖標
                            if (node.classList && (node.classList.contains('fa-paw') || Array.from(node.classList).some(c => c.includes('paw')))) {
                                node.remove();
                            }
                            const paws = node.querySelectorAll ? node.querySelectorAll('.fa-paw, i.fa-paw, [class*="fa-paw"], [class*="paw"], #main-logo, .logo') : [];
                            paws.forEach(function(paw) {
                                paw.remove();
                            });
                        }
                    });
                });
            });
            
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
            
            console.log('✅ 已完全移除所有 logo 和腳掌圖標');
        });
    </script>
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B6B',
                        secondary: '#4ECDC4',
                        accent: '#FFD93D',
                        dark: '#2C3E50',
                        light: '#F7F9FC'
                    },
                    fontFamily: {
                        'sans': ['Nunito', 'Noto Sans TC', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>
<body class="font-sans bg-white text-dark">
    
    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-white shadow-md z-50 transition-all duration-300" id="navbar">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="products.html" class="text-dark hover:text-primary transition">產品系列</a>
                    <a href="#crowdfunding" class="text-dark hover:text-primary transition">集資項目</a>
                    <a href="#quiz" class="text-dark hover:text-primary transition">找適合方案</a>
                    <a href="#jar-exchange" class="text-dark hover:text-primary transition">換罐計畫</a>
                    <a href="#subscription" class="text-dark hover:text-primary transition">訂閱方案</a>
                    <a href="#about" class="text-dark hover:text-primary transition">關於我們</a>
                    
                    <!-- 會員登入/註冊 -->
                    <div class="flex items-center space-x-3">
                        <!-- 未登录状态 -->
                        <button id="loginBtn" onclick="openLoginModal()" class="text-dark hover:text-primary transition flex items-center space-x-1">
                            <i class="fas fa-user"></i>
                            <span>登入</span>
                        </button>
                        <button id="registerBtn" onclick="openLoginModal(); showRegisterForm();" class="hidden text-dark hover:text-primary transition">
                            註冊
                        </button>
                        
                        <!-- 已登录状态 (默认隐藏) -->
                        <div id="userMenu" class="hidden relative">
                            <div class="flex items-center space-x-2">
                                <button onclick="goToMemberCenter()" class="flex items-center space-x-2 text-dark hover:text-primary transition">
                                <i class="fas fa-user-circle text-2xl"></i>
                                <span id="userName">會員</span>
                                </button>
                                <button onclick="toggleUserDropdown(event)" class="text-dark hover:text-primary transition">
                                <i class="fas fa-chevron-down text-xs"></i>
                            </button>
                            </div>
                            <div id="userDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-50">
                                <a href="member-center.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i class="fas fa-user mr-2"></i>會員中心
                                </a>
                                <a href="member-center.html#orders" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i class="fas fa-shopping-bag mr-2"></i>我的訂單
                                </a>
                                <a href="member-center.html#favorites" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i class="fas fa-heart mr-2"></i>我的收藏
                                    <span id="favorite-count" class="ml-2 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full" style="display: none;">0</span>
                                </a>
                                <hr class="my-2">
                                <button onclick="logout()" class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">
                                    <i class="fas fa-sign-out-alt mr-2"></i>登出
                                </button>
                            </div>
                        </div>
                        
                        <a href="cart.html" id="cart-button" class="relative bg-primary text-white px-6 py-2 rounded-full hover:bg-red-600 transition inline-flex items-center">
                            <i class="fas fa-shopping-cart mr-2"></i>購物車
                            <span id="cart-count" class="absolute -top-2 -right-2 bg-accent text-dark text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center" style="display: none;">0</span>
                        </a>
                    </div>
                </div>
                
                <!-- Mobile Menu Button -->
                <button class="md:hidden text-dark text-2xl" id="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <!-- Mobile Menu -->
            <div class="hidden md:hidden mt-4 pb-4" id="mobile-menu">
                <a href="products.html" class="block py-2 text-dark hover:text-primary transition">產品系列</a>
                <a href="#crowdfunding" class="block py-2 text-dark hover:text-primary transition">集資項目</a>
                <a href="#quiz" class="block py-2 text-dark hover:text-primary transition">找適合方案</a>
                <a href="#jar-exchange" class="block py-2 text-dark hover:text-primary transition">換罐計畫</a>
                <a href="#subscription" class="block py-2 text-dark hover:text-primary transition">訂閱方案</a>
                <a href="#about" class="block py-2 text-dark hover:text-primary transition">關於我們</a>
                
                <button onclick="openLoginModal()" class="w-full text-left py-2 text-dark hover:text-primary transition mt-2">
                    <i class="fas fa-user mr-2"></i>
                    <span id="login-text-mobile">會員登入</span>
                </button>
                
                <a href="cart.html" class="relative w-full bg-primary text-white px-6 py-2 rounded-full hover:bg-red-600 transition mt-2 inline-flex items-center justify-center">
                    <i class="fas fa-shopping-cart mr-2"></i>購物車
                    <span id="cart-count-mobile" class="absolute -top-2 -right-2 bg-accent text-dark text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center" style="display: none;">0</span>
                </a>
            </div>
        </div>
    </nav>
    
    <!-- Editable Hero Section (可編輯首頁橫幅) -->
    <section id="hero" class="relative min-h-screen flex items-center justify-center text-white" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1548199973-03cce0bbc87b') center/cover no-repeat;">
        <div class="container mx-auto px-4 text-center">
            <h1 id="heroTitle" class="text-4xl md:text-6xl lg:text-7xl font-bold mb-6">
                給毛孩最好的，從台灣夜市到健康餐桌
            </h1>
            <p id="heroSubtitle" class="text-xl md:text-2xl mb-10 opacity-90 max-w-3xl mx-auto">
                手作零食 × 循環經濟 × 智能訂閱
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <a id="btnPrimary" href="products.html" class="px-8 py-4 bg-white text-primary rounded-full font-bold text-lg hover:bg-opacity-90 transition shadow-lg flex items-center">
                    <i class="fas fa-arrow-right mr-2"></i>
                    <span>探索產品</span>
                </a>
                <a id="btnSecondary" href="quiz.html" class="px-8 py-4 border-2 border-white text-white rounded-full font-bold text-lg hover:bg-white hover:text-primary transition flex items-center">
                    <i class="fas fa-brain mr-2"></i>
                    <span>開始測驗</span>
                </a>
            </div>
        </div>
    </section>
    
    <!-- Toy Products Hero Section -->
    <section id="toys-hero" class="pt-24 pb-16 bg-white">
        <div class="container mx-auto px-4">
            <!-- Hero Section with Animation -->
            <div class="bg-white rounded-3xl p-8 md:p-12 mb-12 shadow-md border border-gray-100 overflow-hidden">
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <!-- Left: Animation -->
                    <div class="flex justify-center">
                        <div id="dog-animation" class="w-full max-w-md" style="height: 400px;"></div>
                    </div>
                    
                    <!-- Right: Content -->
                    <div>
                        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4" style="color: #FF8C42;">
                            給毛孩的益智挑戰
                        </h1>
                        <p class="text-2xl md:text-3xl text-gray-800 font-semibold mb-4">
                            不只防老，更能防拆家
                        </p>
                        <p class="text-lg md:text-xl text-gray-600 mb-8">
                            讓毛孩動腦動手，延緩認知退化！
                        </p>
                        
                        <div class="space-y-4 mb-8">
                            <div class="bg-white/80 backdrop-blur p-4 rounded-xl border-l-4 border-orange-400 shadow-sm">
                                <p class="text-sm text-gray-700 mb-1">
                                    <i class="fas fa-university text-orange-400 mr-2"></i>
                                    <strong>維也納大學 Clever Dog Lab 證實：</strong>
                                </p>
                                <p class="text-sm text-gray-600">定期益智訓練可延緩認知退化達 40%</p>
                            </div>
                            
                            <div class="bg-white/80 backdrop-blur p-4 rounded-xl border-l-4 border-red-400 shadow-sm">
                                <p class="text-sm text-gray-700 mb-2">
                                    <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                                    <strong>缺乏刺激的毛孩可能出現：</strong>
                                </p>
                                <ul class="text-xs text-gray-600 space-y-1 ml-6">
                                    <li>• 焦慮分離症、過度吠叫</li>
                                    <li>• 破壞家具、過動行為</li>
                                    <li>• 認知退化、反應遲鈍</li>
                                    <li>• 憂鬱症狀、食慾不振</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- CTA Buttons -->
                        <div class="space-y-3">
                            <a href="quiz-loading.html?type=toy" class="block w-full bg-orange-400 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:bg-orange-500 transition shadow-lg hover:shadow-xl text-center">
                                <i class="fas fa-brain mr-2"></i>找出最適合的玩具
                            </a>
                            <a href="products.html" class="block w-full bg-white border-2 border-orange-400 text-orange-600 px-8 py-4 rounded-xl text-lg font-semibold hover:bg-orange-400 hover:text-white transition shadow-md hover:shadow-lg text-center">
                                <i class="fas fa-arrow-down mr-2"></i>探索更多產品
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Handmade Snacks Section -->
    <section id="snacks-hero" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4 text-primary">在地手工零食</h2>
                <p class="text-xl md:text-2xl text-gray-700 font-semibold">與寵物共享，文化傳承的味道</p>
            </div>
            
            <div class="bg-white rounded-3xl p-8 md:p-12 mb-12 shadow-xl overflow-hidden">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <!-- Left: Image with Blob Animation Background -->
                    <div class="relative">
                        <!-- Blob Animation Background -->
                        <div id="blob-animation" class="absolute inset-0 flex items-center justify-center" style="z-index: 0;">
                            <div class="w-full h-full max-w-md mx-auto"></div>
                        </div>
                        <!-- Dog Image (去背) -->
                        <div class="relative z-10 flex items-center justify-center" style="min-height: 400px;">
                            <img src="https://www.genspark.ai/api/files/s/Tk9ufqIp" 
                                 alt="開心的狗狗拿著零食" 
                                 class="w-full max-w-sm mx-auto drop-shadow-2xl animate-float"
                                 style="mix-blend-mode: multiply; filter: contrast(1.1) brightness(1.05);">
                        </div>
                    </div>
                    
                    <!-- Right: Content -->
                    <div class="space-y-8">
                        <!-- Title with Animation -->
                        <div class="text-center md:text-left">
                            <h3 class="text-4xl md:text-5xl font-bold mb-3 text-dark animate-fade-in-up">
                                手作職人
                            </h3>
                            <p class="text-2xl md:text-3xl font-semibold text-primary animate-fade-in-up" style="animation-delay: 0.2s;">
                                傳承工藝
                            </p>
                            <div class="w-24 h-1 bg-gradient-to-r from-primary to-secondary mx-auto md:mx-0 mt-4 rounded-full animate-fade-in-up" style="animation-delay: 0.4s;"></div>
                        </div>
                        
                        <!-- Features with Playful Icons -->
                        <ul class="space-y-6">
                            <li class="feature-card group">
                                <div class="flex items-start gap-4 p-4 rounded-2xl bg-gradient-to-r from-red-50 to-orange-50 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="flex-shrink-0 w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                        <i class="fas fa-drumstick-bite text-primary text-2xl"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-xl mb-2 text-gray-800">🥩 多元蛋白跟蔬果</h4>
                                        <p class="text-gray-600">嚴選優質蛋白與新鮮蔬果，從產地到您家全程把關</p>
                                    </div>
                                </div>
                            </li>
                            <li class="feature-card group" style="animation-delay: 0.1s;">
                                <div class="flex items-start gap-4 p-4 rounded-2xl bg-gradient-to-r from-yellow-50 to-orange-50 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="flex-shrink-0 w-12 h-12 bg-accent/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                        <i class="fas fa-heart text-accent text-2xl"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-xl mb-2 text-gray-800">😊 療癒趣味</h4>
                                        <p class="text-gray-600">讓毛孩在品嚐中感受台灣文化的溫度與趣味</p>
                                    </div>
                                </div>
                            </li>
                            <li class="feature-card group" style="animation-delay: 0.2s;">
                                <div class="flex items-start gap-4 p-4 rounded-2xl bg-gradient-to-r from-green-50 to-teal-50 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="flex-shrink-0 w-12 h-12 bg-secondary/10 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                        <i class="fas fa-fire text-secondary text-2xl"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-xl mb-2 text-gray-800">🔥 低溫烘乾工藝</h4>
                                        <p class="text-gray-600">多種蛋白蔬果源，保留天然營養，適合訓練獎勵與日常零食</p>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        
                        <!-- CTA Buttons -->
                        <div class="flex flex-col sm:flex-row gap-4 pt-4">
                            <a href="products.html" class="bg-primary text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-red-600 transition transform hover:scale-105 text-center shadow-lg hover:shadow-xl">
                                <i class="fas fa-shopping-cart mr-2"></i>立即選購
                            </a>
                            <a href="quiz-loading.html?type=nutrition" class="bg-white border-2 border-primary text-primary px-8 py-4 rounded-full text-lg font-semibold hover:bg-primary hover:text-white transition transform hover:scale-105 text-center shadow-md hover:shadow-lg">
                                <i class="fas fa-heart mr-2"></i>營養測驗
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Custom Animations -->
            <style>
                @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-20px); }
                }
                
                @keyframes fade-in-up {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                .animate-float {
                    animation: float 3s ease-in-out infinite;
                }
                
                .animate-fade-in-up {
                    animation: fade-in-up 0.8s ease-out forwards;
                    opacity: 0;
                }
                
                .feature-card {
                    animation: fade-in-up 0.8s ease-out forwards;
                    opacity: 0;
                }
            </style>
            
            <!-- Product Cards -->
            <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Product 1 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition group">
                    <div class="relative overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400" alt="雞肉脆片" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500">
                        <div class="absolute top-4 right-4 bg-primary text-white px-3 py-1 rounded-full text-sm font-semibold">
                            熱賣
                        </div>
                    </div>
                    <div class="p-6">
                        <h4 class="text-xl font-bold mb-2">雞肉脆片</h4>
                        <p class="text-gray-600 text-sm mb-4">低溫烘焙，保留營養</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary">NT$ 200</span>
                            <button onclick="addToCart('snack-chicken-crisp', '雞肉脆片', 200)" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-red-600 transition text-sm">
                                <i class="fas fa-shopping-cart mr-1"></i>加入購物車
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Product 2 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition group">
                    <div class="relative overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1606890737304-57a1ca8a5b62?w=400" alt="地瓜餅乾" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500">
                    </div>
                    <div class="p-6">
                        <h4 class="text-xl font-bold mb-2">地瓜餅乾</h4>
                        <p class="text-gray-600 text-sm mb-4">台灣地瓜，香甜健康</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary">NT$ 180</span>
                            <button onclick="addToCart('snack-sweet-potato', '地瓜餅乾', 180)" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-red-600 transition text-sm">
                                <i class="fas fa-shopping-cart mr-1"></i>加入購物車
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Product 3 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition group">
                    <div class="relative overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1560870350-c740e8d9a5b6?w=400" alt="鮭魚小丸子" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500">
                        <div class="absolute top-4 right-4 bg-accent text-dark px-3 py-1 rounded-full text-sm font-semibold">
                            新品
                        </div>
                    </div>
                    <div class="p-6">
                        <h4 class="text-xl font-bold mb-2">鮭魚小丸子</h4>
                        <p class="text-gray-600 text-sm mb-4">富含 Omega-3</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary">NT$ 250</span>
                            <button onclick="addToCart('snack-salmon-balls', '鮭魚小丸子', 250)" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-red-600 transition text-sm">
                                <i class="fas fa-shopping-cart mr-1"></i>加入購物車
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Product 4 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition group">
                    <div class="relative overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1568640347023-a616a30bc3bd?w=400" alt="牛肉乾" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500">
                    </div>
                    <div class="p-6">
                        <h4 class="text-xl font-bold mb-2">牛肉乾</h4>
                        <p class="text-gray-600 text-sm mb-4">高蛋白質，耐咬好吃</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary">NT$ 300</span>
                            <button onclick="addToCart('snack-beef-jerky', '牛肉乾', 300)" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-red-600 transition text-sm">
                                <i class="fas fa-shopping-cart mr-1"></i>加入購物車
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Product 5 - 壕大大雞排 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition group">
                    <div class="relative overflow-hidden">
                        <img src="https://www.genspark.ai/api/files/s/YgZynI0G" alt="壕大大雞排" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500">
                        <div class="absolute top-4 right-4 bg-accent text-dark px-3 py-1 rounded-full text-sm font-semibold">
                            🔥 熱賣
                        </div>
                    </div>
                    <div class="p-6">
                        <h4 class="text-xl font-bold mb-2">壕大大雞排</h4>
                        <p class="text-gray-600 text-sm mb-4">台灣夜市經典，毛孩最愛</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary">NT$ 220</span>
                            <button onclick="addToCart('hao-chicken-steak', '壕大大雞排', 220)" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-red-600 transition text-sm">
                                <i class="fas fa-shopping-cart mr-1"></i>加入購物車
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Scientific Backing Section -->
    <section id="scientific-evidence" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">科學實證的品質保證</h2>
                <p class="text-xl text-gray-600">權威研究支持我們的每個選擇</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <!-- Research 1 -->
                <div class="bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition text-center">
                    <div class="w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-heartbeat text-primary text-4xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">延長壽命 3 年</h3>
                    <p class="text-gray-700 mb-4">
                        獸醫營養學家 <strong>Gerard Lippert</strong> 研究證實
                    </p>
                    <div class="bg-primary/10 rounded-xl p-4 mb-4">
                        <p class="text-sm text-gray-700">
                            天然無添加的飲食，可使寵物<br>
                            <strong class="text-primary text-xl">平均多活 3 年</strong>
                        </p>
                    </div>
                    <p class="text-xs text-gray-500">
                        Lippert, G. (2003)<br>
                        "Comparative Ages Study"
                    </p>
                </div>
                
                <!-- Research 2 -->
                <div class="bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition text-center">
                    <div class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6" style="background: linear-gradient(135deg, #FF8C42, #FFD93D);">
                        <i class="fas fa-brain text-white text-4xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">減緩認知退化 40%</h3>
                    <p class="text-gray-700 mb-4">
                        維也納大學 <strong>Clever Dog Lab</strong>
                    </p>
                    <div class="rounded-xl p-4 mb-4" style="background: linear-gradient(135deg, #FF8C42, #FFD93D); opacity: 0.15;">
                        <p class="text-sm text-gray-700" style="opacity: 1;">
                            定期認知訓練的熟齡毛孩<br>
                            <strong class="text-xl" style="color: #FF8C42;">衰退速度減緩 40%</strong>
                        </p>
                    </div>
                    <div class="bg-orange-50 rounded-xl p-4 mb-4">
                        <p class="text-sm text-gray-700">
                            定期認知訓練的熟齡毛孩<br>
                            <strong class="text-xl" style="color: #FF8C42;">衰退速度減緩 40%</strong>
                        </p>
                    </div>
                    <p class="text-xs text-gray-500">
                        Vienna Clever Dog Lab<br>
                        University of Vienna (2015-2020)
                    </p>
                </div>
                
                <!-- Research 3 -->
                <div class="bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition text-center">
                    <div class="w-20 h-20 bg-accent/20 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-shield-alt text-accent text-4xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">30% 皮膚問題來自食物</h3>
                    <p class="text-gray-700 mb-4">
                        <strong>美國獸醫皮膚科學會</strong>（ACVD）
                    </p>
                    <div class="bg-accent/10 rounded-xl p-4 mb-4">
                        <p class="text-sm text-gray-700 mb-2">
                            <strong class="text-accent text-xl">30%</strong> 寵物皮膚問題<br>
                            與食物過敏相關
                        </p>
                        <p class="text-xs text-gray-600 mt-2">
                            <strong>常見過敏原：</strong><br>
                            牛肉、乳製品、小麥、雞蛋
                        </p>
                    </div>
                    <p class="text-xs text-gray-500">
                        American College of<br>
                        Veterinary Dermatology
                    </p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Products Section -->
    <section id="products" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <!-- Section Header -->
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-bold mb-4 text-dark">為你的毛孩精心準備</h2>
                <p class="text-xl text-gray-600">三大產品系列，滿足不同需求</p>
            </div>
            
            <!-- Product Tabs -->
            <div class="flex flex-wrap justify-center gap-4 mb-12">
                <button class="product-tab active px-8 py-3 rounded-full font-semibold transition" data-tab="toys">
                    益智玩具防老系列
                </button>
                <button class="product-tab px-8 py-3 rounded-full font-semibold transition" data-tab="snacks">
                    台灣夜市手作零食
                </button>
                <button class="product-tab px-8 py-3 rounded-full font-semibold transition" data-tab="subscription">
                    營養罐訂閱系列
                </button>
            </div>
            
            <!-- Toy Products -->
            <div id="tab-toys" class="product-content">
                <!-- Hero Section with Animation -->
                <div class="bg-white rounded-3xl p-8 mb-8 shadow-md border border-gray-100 overflow-hidden">
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <!-- Left: Animation -->
                        <div class="flex justify-center">
                            <div id="dog-animation" class="w-full max-w-md" style="height: 400px;"></div>
                        </div>
                        
                        <!-- Right: Content -->
                        <div>
                            <h3 class="text-3xl font-bold mb-4" style="color: #FF8C42;">
                                益智玩具防老系列
                            </h3>
                            <p class="text-lg text-gray-700 mb-6">
                                讓毛孩動腦動手，延緩認知退化！
                            </p>
                            
                            <div class="space-y-4 mb-6">
                                <div class="bg-white/80 backdrop-blur p-4 rounded-xl border-l-4 border-orange-400 shadow-sm">
                                    <p class="text-sm text-gray-700 mb-1">
                                        <i class="fas fa-university text-orange-400 mr-2"></i>
                                        <strong>維也納大學研究證實：</strong>
                                    </p>
                                    <p class="text-sm text-gray-600">益智刺激可延緩寵物認知退化</p>
                                </div>
                                
                                <div class="bg-white/80 backdrop-blur p-4 rounded-xl border-l-4 border-red-400 shadow-sm">
                                    <p class="text-sm text-gray-700">
                                        <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                                        超過 <strong class="text-red-600">50%</strong> 高齡犬面臨失智風險
                                    </p>
                                </div>
                            </div>
                            
                            <div class="bg-white/90 backdrop-blur rounded-xl p-5 shadow-sm">
                                <h4 class="font-semibold mb-3 text-lg text-gray-800">🎯 產品分類</h4>
                                <ul class="space-y-2 text-gray-700">
                                    <li class="flex items-center">
                                        <i class="fas fa-search text-orange-400 mr-3"></i>
                                        <span>嗅聞刺激型（藏食玩具）</span>
                                    </li>
                                    <li class="flex items-center">
                                        <i class="fas fa-puzzle-piece text-orange-400 mr-3"></i>
                                        <span>互動解謎型（推拉機關）</span>
                                    </li>
                                    <li class="flex items-center">
                                        <i class="fas fa-brain text-orange-400 mr-3"></i>
                                        <span>記憶訓練型（按鈕遊戲）</span>
                                    </li>
                                    <li class="flex items-center">
                                        <i class="fas fa-layer-group text-orange-400 mr-3"></i>
                                        <span>難度分級：初級/中級/高級</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Toy Product Grid - 動態載入 -->
                <div id="toysProductsContainer" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- 產品將從 API 動態載入 -->
                    <div class="col-span-full text-center py-12">
                        <div class="loading inline-block"></div>
                        <p class="mt-4 text-gray-600">載入產品中...</p>
                    </div>
                </div>
                
                <div class="text-center mt-8">
                    <a href="quiz-toy.html" class="inline-block bg-orange-400 text-white px-8 py-3 rounded-full hover:bg-orange-500 transition">
                        不確定選哪款？2分鐘找出最適合的玩具 <i class="fas fa-arrow-right ml-2"></i>
                    </a>
                </div>
            </div>
            
            <!-- Subscription Products -->
            <div id="tab-subscription" class="product-content hidden">
                <div class="bg-light rounded-3xl p-8 mb-8">
                    <h3 class="text-2xl font-bold mb-4 text-secondary">營養罐訂閱系列</h3>
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <h4 class="font-semibold mb-2 text-lg">產品特色</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li><i class="fas fa-check text-secondary mr-2"></i>主餐 + 副餐（營養粉）科學配方</li>
                                <li><i class="fas fa-check text-secondary mr-2"></i>兩週訂閱制，新鮮配送</li>
                                <li><i class="fas fa-check text-secondary mr-2"></i>玻璃罐可循環使用</li>
                                <li><i class="fas fa-check text-secondary mr-2"></i>搭配「換罐計畫」更環保</li>
                            </ul>
                        </div>
                        <div>
                            <img src="https://www.genspark.ai/api/files/s/VwgxRxOz" alt="循環罐設計" class="rounded-2xl shadow-lg w-full h-64 object-cover">
                        </div>
                    </div>
                </div>
                
                <!-- Subscription Plans -->
                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Plan 1 -->
                    <div class="bg-white rounded-2xl shadow-lg p-8 border-2 border-gray-200 hover:border-secondary transition cursor-pointer" onclick="window.location.href='products.html?category=subscription'">
                        <h4 class="text-xl font-bold mb-2">單次購買</h4>
                        <p class="text-gray-600 mb-4">想先試試看？</p>
                        <div class="mb-6">
                            <span class="text-4xl font-bold text-primary">NT$ 680</span>
                            <span class="text-gray-500">/次</span>
                        </div>
                        <ul class="space-y-3 mb-6">
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">1 個主餐罐（300g）</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">1 包營養粉（50g）</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">玻璃罐可重複使用</span>
                            </li>
                        </ul>
                        <button onclick="event.stopPropagation(); window.location.href='products.html?category=subscription';" class="w-full bg-gray-200 text-dark px-6 py-3 rounded-full hover:bg-gray-300 transition">
                            立即購買
                        </button>
                    </div>
                    
                    <!-- Plan 2 - Popular -->
                    <div class="bg-white rounded-2xl shadow-2xl p-8 border-2 border-secondary relative transform scale-105 cursor-pointer" onclick="window.location.href='products.html?category=subscription'">
                        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-secondary text-white px-6 py-1 rounded-full text-sm font-semibold">
                            最受歡迎
                        </div>
                        <h4 class="text-xl font-bold mb-2">訂閱優惠</h4>
                        <p class="text-gray-600 mb-4">兩週配送一次</p>
                        <div class="mb-6">
                            <span class="text-4xl font-bold text-secondary">NT$ 599</span>
                            <span class="text-gray-500">/次</span>
                            <p class="text-sm text-gray-500 line-through">原價 NT$ 680</p>
                        </div>
                        <ul class="space-y-3 mb-6">
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">1 個主餐罐（300g）</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">1 包營養粉（50g）</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">省 12% 訂閱優惠</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">免運費</span>
                            </li>
                        </ul>
                        <button onclick="event.stopPropagation(); window.location.href='products.html?category=subscription';" class="w-full bg-secondary text-white px-6 py-3 rounded-full hover:bg-teal-600 transition">
                            開始訂閱
                        </button>
                    </div>
                    
                    <!-- Plan 3 -->
                    <div class="bg-white rounded-2xl shadow-lg p-8 border-2 border-gray-200 hover:border-accent transition cursor-pointer" onclick="window.location.href='index.html#jar-exchange'">
                        <h4 class="text-xl font-bold mb-2">換罐計畫專屬</h4>
                        <p class="text-gray-600 mb-4">搭配美容院包月</p>
                        <div class="mb-6">
                            <span class="text-4xl font-bold text-accent">詢問</span>
                            <span class="text-gray-500">/價格</span>
                        </div>
                        <ul class="space-y-3 mb-6">
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">營養罐訂閱</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">每月免費洗澡</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">罐子到店回收</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-secondary mr-2 mt-1"></i>
                                <span class="text-sm">額外專屬優惠</span>
                            </li>
                        </ul>
                        <button onclick="event.stopPropagation(); window.location.href='index.html#jar-exchange';" class="w-full bg-accent text-dark px-6 py-3 rounded-full hover:bg-yellow-400 transition">
                            了解換罐計畫
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Snacks Products -->
            <div id="tab-snacks" class="product-content hidden">
                <div class="bg-light rounded-3xl p-8 mb-8">
                    <h3 class="text-2xl font-bold mb-4 text-primary">台灣夜市手作零食系列</h3>
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <h4 class="font-semibold mb-2 text-lg">產品特色</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li><i class="fas fa-check text-secondary mr-2"></i>手工製作，天然無添加</li>
                                <li><i class="fas fa-check text-secondary mr-2"></i>台灣在地食材</li>
                                <li><i class="fas fa-check text-secondary mr-2"></i>夜市風味靈感</li>
                                <li><i class="fas fa-check text-secondary mr-2"></i>適合訓練獎勵、日常零食</li>
                            </ul>
                        </div>
                        <div>
                            <img src="https://www.genspark.ai/api/files/s/PNdhm7MY" alt="手作零食包裝" class="rounded-2xl shadow-lg w-full h-64 object-cover">
                        </div>
                    </div>
                </div>
                
                <!-- 動態產品容器 -->
                <div id="snacksProductsContainer" class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                    <!-- 產品將從 DataStore 動態載入 -->
                </div>
                
                <!-- 靜態產品（備用） - 隱藏 -->
                <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 hidden">
                    <!-- Product Card 1 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition group">
                        <a href="product-chicken-steak.html" class="block">
                            <div class="relative overflow-hidden">
                                <img src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400" alt="雞肉脆片" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500">
                                <div class="absolute top-4 right-4 bg-primary text-white px-3 py-1 rounded-full text-sm font-semibold">
                                    熱賣
                                </div>
                            </div>
                            <div class="p-6">
                                <h4 class="text-xl font-bold mb-2">雞肉脆片</h4>
                                <p class="text-gray-600 text-sm mb-4">低溫烘焙，保留營養</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-2xl font-bold text-primary">NT$ 200</span>
                                    <span class="inline-block bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm group-hover:bg-secondary group-hover:text-white transition">
                                        查看詳情 <i class="fas fa-arrow-right ml-1"></i>
                                    </span>
                                </div>
                            </div>
                        </a>
                    </div>
                    
                    <!-- Product Card 2 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition group">
                        <a href="product-chicken-steak.html" class="block">
                            <div class="relative overflow-hidden">
                                <img src="https://images.unsplash.com/photo-1606890737304-57a1ca8a5b62?w=400" alt="地瓜餅乾" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500">
                            </div>
                            <div class="p-6">
                                <h4 class="text-xl font-bold mb-2">地瓜餅乾</h4>
                                <p class="text-gray-600 text-sm mb-4">台灣地瓜，香甜健康</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-2xl font-bold text-primary">NT$ 180</span>
                                    <span class="inline-block bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm group-hover:bg-secondary group-hover:text-white transition">
                                        查看詳情 <i class="fas fa-arrow-right ml-1"></i>
                                    </span>
                                </div>
                            </div>
                        </a>
                    </div>
                    
                    <!-- Product Card 3 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition group">
                        <div class="relative overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1560870350-c740e8d9a5b6?w=400" alt="鮭魚小丸子" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500">
                            <div class="absolute top-4 right-4 bg-accent text-dark px-3 py-1 rounded-full text-sm font-semibold">
                                新品
                            </div>
                        </div>
                        <div class="p-6">
                            <h4 class="text-xl font-bold mb-2">鮭魚小丸子</h4>
                            <p class="text-gray-600 text-sm mb-4">富含 Omega-3</p>
                            <div class="flex justify-between items-center">
                                <span class="text-2xl font-bold text-primary">NT$ 250</span>
                                <a href="product-chicken-steak.html" class="inline-block bg-secondary text-white px-4 py-2 rounded-full hover:bg-teal-600 transition text-sm">
                                    查看詳情
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product Card 4 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition group">
                        <div class="relative overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1568640347023-a616a30bc3bd?w=400" alt="牛肉乾" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500">
                        </div>
                        <div class="p-6">
                            <h4 class="text-xl font-bold mb-2">牛肉乾</h4>
                            <p class="text-gray-600 text-sm mb-4">高蛋白質，耐咬好吃</p>
                            <div class="flex justify-between items-center">
                                <span class="text-2xl font-bold text-primary">NT$ 300</span>
                                <a href="product-chicken-steak.html" class="inline-block bg-secondary text-white px-4 py-2 rounded-full hover:bg-teal-600 transition text-sm">
                                    查看詳情
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product Card 5 - 壕大大雞排 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition group">
                        <div class="relative overflow-hidden">
                            <img src="https://www.genspark.ai/api/files/s/YgZynI0G" alt="壕大大雞排" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500">
                            <div class="absolute top-4 right-4 bg-accent text-dark px-3 py-1 rounded-full text-sm font-semibold">
                                🔥 熱賣
                            </div>
                        </div>
                        <div class="p-6">
                            <h4 class="text-xl font-bold mb-2">壕大大雞排</h4>
                            <p class="text-gray-600 text-sm mb-4">台灣夜市經典，毛孩最愛</p>
                            <div class="flex justify-between items-center">
                                <span class="text-2xl font-bold text-primary">NT$ 220</span>
                                <button onclick="addToCart('hao-chicken-steak', '壕大大雞排', 220); return false;" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-red-600 transition text-sm">
                                    <i class="fas fa-shopping-cart mr-1"></i>加入購物車
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-8">
                    <a href="products.html" class="inline-flex items-center bg-primary text-white px-8 py-3 rounded-full hover:bg-red-600 hover:shadow-lg transition">
                        <i class="fas fa-th mr-2"></i>
                        查看所有產品
                        <i class="fas fa-arrow-right ml-2 text-sm"></i>
                    </a>
                    <p class="text-xs text-gray-500 mt-3"><i class="fas fa-truck mr-1"></i>全站免運優惠中</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Crowdfunding Section -->
    <section id="crowdfunding" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <!-- Section Header -->
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">支持匠寵，一起創造更好的寵物生活</h2>
                <p class="text-xl text-gray-600">我們正在開發新產品線，需要你的支持</p>
            </div>
            
            <!-- Crowdfunding Card -->
            <div class="max-w-5xl mx-auto">
                <div class="bg-white rounded-3xl shadow-2xl overflow-hidden">
                    <div class="grid md:grid-cols-2">
                        <!-- Left: Image -->
                        <div class="relative h-64 md:h-auto">
                            <img src="https://www.genspark.ai/api/files/s/m3yVEJlo" alt="集資項目" class="w-full h-full object-cover">
                            <div class="absolute top-4 left-4 bg-accent text-dark px-4 py-2 rounded-full font-bold text-sm">
                                🔥 進行中
                            </div>
                        </div>
                        
                        <!-- Right: Content -->
                        <div class="p-8 md:p-12">
                            <h3 class="text-3xl font-bold mb-4">淨寵循環 - 寵物濕紙巾環保包裝系列</h3>
                            
                            <!-- Progress Info -->
                            <div class="mb-6">
                                <div class="flex justify-between mb-2">
                                    <span class="text-2xl font-bold text-accent">NT$ 285,000</span>
                                    <span class="text-gray-600">目標 NT$ 500,000</span>
                                </div>
                                
                                <!-- Progress Bar -->
                                <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                                    <div class="bg-gradient-to-r from-accent to-yellow-400 h-full rounded-full transition-all duration-1000" style="width: 57%;"></div>
                                </div>
                                
                                <div class="flex justify-between mt-2 text-sm text-gray-600">
                                    <span>57% 完成</span>
                                    <span>剩餘 45 天</span>
                                    <span>156 人支持</span>
                                </div>
                            </div>
                            
                            <!-- Highlights -->
                            <div class="mb-6 space-y-2">
                                <p class="flex items-center text-gray-700">
                                    <i class="fas fa-star text-accent mr-2"></i>
                                    全新產品線開發
                                </p>
                                <p class="flex items-center text-gray-700">
                                    <i class="fas fa-recycle text-secondary mr-2"></i>
                                    環保包裝設計
                                </p>
                                <p class="flex items-center text-gray-700">
                                    <i class="fas fa-gift text-primary mr-2"></i>
                                    早鳥限定優惠
                                </p>
                                <p class="flex items-center text-gray-700">
                                    <i class="fas fa-seedling text-green-500 mr-2"></i>
                                    支持台灣本土品牌
                                </p>
                            </div>
                            
                            <!-- Reward Tiers Preview -->
                            <div class="grid grid-cols-3 gap-3 mb-6">
                                <div class="bg-light p-3 rounded-xl text-center hover:shadow-lg transition cursor-pointer">
                                    <p class="font-bold text-accent">NT$ 500</p>
                                    <p class="text-xs text-gray-600 mt-1">早鳥零食包</p>
                                    <p class="text-xs text-primary mt-1">🔥 限量 50 組</p>
                                </div>
                                <div class="bg-accent/20 p-3 rounded-xl text-center border-2 border-accent hover:shadow-lg transition cursor-pointer">
                                    <p class="font-bold text-accent">NT$ 1,500</p>
                                    <p class="text-xs text-gray-600 mt-1">訂閱 1 個月</p>
                                    <p class="text-xs text-accent mt-1">最受歡迎</p>
                                </div>
                                <div class="bg-light p-3 rounded-xl text-center hover:shadow-lg transition cursor-pointer">
                                    <p class="font-bold text-accent">NT$ 3,000</p>
                                    <p class="text-xs text-gray-600 mt-1">訂閱 3 個月</p>
                                    <p class="text-xs text-secondary mt-1">💎 超值組合</p>
                                </div>
                            </div>
                            
                            <!-- External Link Notice -->
                            <div class="bg-gradient-to-r from-orange-100 to-yellow-100 border-l-4 border-orange-400 p-4 rounded-lg mb-4">
                                <p class="text-sm font-semibold text-gray-800">
                                    <i class="fas fa-external-link-alt text-orange-400 mr-2"></i>
                                    此計畫於 <strong>嘖嘖嘖群眾集資平台</strong> 進行
                                </p>
                                <p class="text-xs text-gray-600 mt-1">
                                    點擊按鈕將引導至嘖嘖嘖官網，查看完整計畫詳情和回饋方案
                                </p>
                            </div>
                            
                            <!-- CTA Buttons -->
                            <div class="flex flex-col sm:flex-row gap-3">
                                <a href="#" onclick="alert('即將前往「嘖嘖嘖」群眾集資平台\n\n你將看到：\n完整計畫說明\n所有回饋方案\n安全的付款系統\n計畫進度更新'); return false;" class="flex-1 bg-gradient-to-r from-orange-400 to-yellow-400 text-white px-6 py-4 rounded-full font-bold text-center hover:shadow-xl transition transform hover:scale-105">
                                    <i class="fas fa-rocket mr-2"></i>前往嘖嘖嘖支持
                                    <i class="fas fa-external-link-alt ml-2 text-sm"></i>
                                </a>
                                <a href="#quiz" class="flex-1 bg-white border-2 border-accent text-dark px-6 py-4 rounded-full font-semibold text-center hover:bg-accent hover:text-dark transition">
                                    <i class="fas fa-flask mr-2"></i>
                                    先做測驗找方案
                                </a>
                            </div>
                            
                            <!-- Social Proof -->
                            <p class="text-center text-sm text-gray-600 mt-4">
                                <i class="fas fa-users text-accent mr-1"></i>
                                已有 <strong>156 位</strong>毛爸媽支持此計畫
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Quiz Section -->
    <section id="quiz" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <!-- Section Header -->
            <div class="text-center mb-12">
                <div class="inline-block bg-gradient-to-r from-secondary to-orange-400 text-white px-6 py-2 rounded-full text-sm font-bold mb-4">
                    <i class="fas fa-sparkles mr-2"></i>智能推薦系統
                </div>
                <h2 class="text-4xl md:text-5xl font-bold mb-4">🎯 不確定什麼最適合毛孩？</h2>
                <p class="text-xl text-gray-700 mb-3"><strong>3 分鐘</strong>簡單問答，AI 智能分析</p>
                <p class="text-lg text-secondary font-bold mb-2">
                    <i class="fas fa-gift mr-1"></i>
                    完成測驗立即獲得 <span class="text-primary">15% 折扣碼</span> + 專屬訂閱方案
                </p>
                <div class="flex justify-center items-center gap-4 mt-4 flex-wrap">
                    <span class="text-sm text-gray-600"><i class="fas fa-users text-secondary mr-1"></i>已有 <strong>2,847</strong> 位毛爸媽完成測驗</span>
                    <span class="text-sm text-gray-600"><i class="fas fa-star text-accent mr-1"></i>平均滿意度 <strong>4.8/5.0</strong></span>
                </div>
            </div>
            
            <!-- Quiz Cards -->
            <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto mb-12" id="quizCardsContainer">
                <!-- Nutrition Quiz -->
                <div id="nutritionQuizCard" class="bg-gradient-to-br from-secondary/10 to-teal-50 rounded-3xl p-8 shadow-xl hover:shadow-2xl transition transform hover:-translate-y-2 duration-300 border-2 border-transparent hover:border-secondary">
                    <div class="flex justify-center mb-6">
                        <div class="w-24 h-24 bg-secondary rounded-full flex items-center justify-center">
                            <i class="fas fa-utensils text-white text-4xl"></i>
                        </div>
                    </div>
                    
                    <h3 class="text-2xl font-bold text-center mb-2">營養健康測驗</h3>
                    <p class="text-center text-sm text-secondary font-semibold mb-4">找到最適合的飲食方案</p>
                    
                    <div class="bg-white rounded-xl p-3 mb-4 text-center">
                        <p class="text-xs text-gray-500">包含</p>
                        <p class="font-bold text-gray-800"><span class="text-2xl text-secondary">10</span> 個問題</p>
                    </div>
                    
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-secondary mr-2 mt-1"></i>
                            <span class="text-sm">根據毛孩的年齡、體重、活動量、健康狀況</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-secondary mr-2 mt-1"></i>
                            <span class="text-sm">推薦最適合的飲食方案</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-secondary mr-2 mt-1"></i>
                            <span class="text-sm">基本資訊 + 健康評估 + 生活型態分析</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-secondary mr-2 mt-1"></i>
                            <span class="text-sm">個人化產品推薦</span>
                        </li>
                    </ul>
                    
                    <div class="text-center mb-6">
                        <span class="inline-block bg-secondary/20 text-secondary px-4 py-2 rounded-full text-sm font-semibold">
                            <i class="fas fa-clock mr-1"></i>預計時間：約 3 分鐘
                        </span>
                    </div>
                    
                    <a href="quiz-loading.html?type=nutrition" class="block w-full bg-gradient-to-r from-secondary to-teal-500 text-white px-6 py-4 rounded-full font-bold text-center hover:shadow-xl transition transform hover:scale-105 relative overflow-hidden group">
                        <span class="relative z-10">立即開始測驗 <i class="fas fa-arrow-right ml-2"></i></span>
                        <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition"></div>
                    </a>
                    <p class="text-center text-xs text-gray-500 mt-3"><i class="fas fa-lock mr-1"></i>你的資料完全保密</p>
                </div>
                
                <!-- Toy Quiz -->
                <div id="toyQuizCard" class="bg-white rounded-3xl p-8 shadow-md hover:shadow-lg transition border border-gray-200 hover:border-primary">
                    <div class="flex justify-center mb-6">
                        <div class="w-24 h-24 bg-orange-400 rounded-full flex items-center justify-center">
                            <i class="fas fa-brain text-white text-4xl"></i>
                        </div>
                    </div>
                    
                    <h3 class="text-2xl font-bold text-center mb-2">熟齡寵物腦力測驗</h3>
                    <p class="text-center text-sm text-orange-400 font-semibold mb-4">找到最適合的益智玩具</p>
                    
                    <div class="bg-white rounded-xl p-3 mb-4 text-center">
                        <p class="text-xs text-gray-500">包含</p>
                        <p class="font-bold text-gray-800"><span class="text-2xl text-orange-400">12</span> 個問題</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-orange-400 to-yellow-400 text-white p-3 rounded-xl mb-4 text-center">
                        <p class="text-xs font-semibold">
                            <i class="fas fa-university mr-1"></i>
                            基於維也納大學 Clever Dog Lab 研究
                        </p>
                        <p class="text-xs mt-1">專為 7 歲以上熟齡犬貓設計</p>
                    </div>
                    
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-orange-400 mr-2 mt-1"></i>
                            <span class="text-sm">評估認知健康（7 個科學問題）</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-orange-400 mr-2 mt-1"></i>
                            <span class="text-sm">活動能力評估</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-orange-400 mr-2 mt-1"></i>
                            <span class="text-sm">玩具偏好分析</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-orange-400 mr-2 mt-1"></i>
                            <span class="text-sm">個人化玩具組合推薦</span>
                        </li>
                    </ul>
                    
                    <div class="flex justify-center gap-4 mb-6">
                        <span class="inline-block bg-orange-100 text-orange-400 px-4 py-2 rounded-full text-sm font-semibold">
                            <i class="fas fa-clock mr-1"></i>約 4 分鐘
                        </span>
                        <span class="inline-block bg-orange-100 text-orange-400 px-4 py-2 rounded-full text-sm font-semibold">
                            <i class="fas fa-flask mr-1"></i>科學研究
                        </span>
                    </div>
                    
                    <a href="quiz-toy.html" class="block w-full bg-gradient-to-r from-orange-400 to-yellow-400 text-white px-6 py-4 rounded-full font-bold text-center hover:shadow-xl transition transform hover:scale-105 relative overflow-hidden group">
                        <span class="relative z-10">立即開始測驗 <i class="fas fa-arrow-right ml-2"></i></span>
                        <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition"></div>
                    </a>
                    <p class="text-center text-xs text-gray-500 mt-3"><i class="fas fa-lock mr-1"></i>你的資料完全保密</p>
                </div>
            </div>
            
            <!-- Quiz Benefits -->
            <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 max-w-4xl mx-auto">
                <div class="text-center">
                    <div class="w-16 h-16 bg-secondary/20 rounded-full flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-bullseye text-secondary text-2xl"></i>
                    </div>
                    <h4 class="font-bold mb-2">精準推薦</h4>
                    <p class="text-sm text-gray-600">基於科學算法分析</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-user-md text-primary text-2xl"></i>
                    </div>
                    <h4 class="font-bold mb-2">專業評估</h4>
                    <p class="text-sm text-gray-600">參考獸醫和營養師建議</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-gift text-accent text-2xl"></i>
                    </div>
                    <h4 class="font-bold mb-2">專屬優惠</h4>
                    <p class="text-sm text-gray-600">完成後獲得專屬優惠</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-secondary/20 rounded-full flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-bolt text-secondary text-2xl"></i>
                    </div>
                    <h4 class="font-bold mb-2">快速便捷</h4>
                    <p class="text-sm text-gray-600">只需 3-5 分鐘</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Jar Exchange Section -->
    <section id="jar-exchange" class="py-20 bg-light">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">換罐計畫 - 讓愛與環保循環</h2>
                <p class="text-xl text-gray-600">結合寵物美容與環保回收，創造雙贏</p>
            </div>
            
            <div class="max-w-4xl mx-auto">
                <!-- Image -->
                <div class="mb-12">
                    <img src="https://www.genspark.ai/api/files/s/m3yVEJlo" alt="換罐計畫流程" class="w-full rounded-3xl shadow-2xl">
                </div>
                
                <!-- 4 Steps -->
                <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                    <div class="bg-white rounded-2xl p-6 text-center shadow-lg hover:shadow-xl transition">
                        <div class="w-16 h-16 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-white text-2xl font-bold">1</span>
                        </div>
                        <h4 class="font-bold mb-2">訂閱餐罐</h4>
                        <p class="text-sm text-gray-600">選擇適合的訂閱方案</p>
                    </div>
                    <div class="bg-white rounded-2xl p-6 text-center shadow-lg hover:shadow-xl transition">
                        <div class="w-16 h-16 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-white text-2xl font-bold">2</span>
                        </div>
                        <h4 class="font-bold mb-2">使用完畢</h4>
                        <p class="text-sm text-gray-600">享用營養美味的餐食</p>
                    </div>
                    <div class="bg-white rounded-2xl p-6 text-center shadow-lg hover:shadow-xl transition">
                        <div class="w-16 h-16 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-white text-2xl font-bold">3</span>
                        </div>
                        <h4 class="font-bold mb-2">帶罐洗澡</h4>
                        <p class="text-sm text-gray-600">到合作店家回收空罐</p>
                    </div>
                    <div class="bg-white rounded-2xl p-6 text-center shadow-lg hover:shadow-xl transition">
                        <div class="w-16 h-16 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-white text-2xl font-bold">4</span>
                        </div>
                        <h4 class="font-bold mb-2">獲得優惠</h4>
                        <p class="text-sm text-gray-600">享受免費洗澡服務</p>
                    </div>
                </div>
                
                <!-- Benefits -->
                <div class="bg-white rounded-3xl p-8 shadow-xl">
                    <h3 class="text-2xl font-bold mb-6 text-center">計畫優勢</h3>
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <i class="fas fa-leaf text-4xl text-secondary mb-3"></i>
                            <h4 class="font-bold mb-2">環保循環</h4>
                            <p class="text-sm text-gray-600">減少 80% 包裝浪費</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-tags text-4xl text-primary mb-3"></i>
                            <h4 class="font-bold mb-2">省錢實惠</h4>
                            <p class="text-sm text-gray-600">每月免費洗澡服務</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-handshake text-4xl text-accent mb-3"></i>
                            <h4 class="font-bold mb-2">支持在地</h4>
                            <p class="text-sm text-gray-600">與社區美容院合作</p>
                        </div>
                    </div>
                </div>
                
                <!-- CTA -->
                <div class="text-center mt-8">
                    <a href="#" class="inline-block bg-secondary text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-teal-600 transition transform hover:scale-105">
                        了解更多換罐計畫 <i class="fas fa-arrow-right ml-2"></i>
                    </a>
                    <a href="#" class="inline-block ml-4 bg-white border-2 border-secondary text-secondary px-8 py-4 rounded-full text-lg font-bold hover:bg-secondary hover:text-white transition">
                        查看合作店家
                    </a>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Subscription Preview -->
    <section id="subscription" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">零食套餐訂閱方案</h2>
                <p class="text-xl text-gray-600">選擇最適合您毛孩的訂閱計畫</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <!-- 小食組 -->
                <div class="bg-white rounded-2xl shadow-lg p-8 border-2 border-gray-200 hover:shadow-2xl transition relative">
                    <div class="text-center mb-6">
                        <div class="text-sm text-gray-500 mb-2">輕量嚐鮮首選</div>
                        <h3 class="text-2xl font-bold mb-4">小食組</h3>
                        <div class="text-5xl font-bold mb-1" style="color: #FF6B6B;">$399</div>
                        <div class="text-sm text-gray-500">每月計費</div>
                    </div>
                    <div class="space-y-4 mb-6">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="text-sm font-semibold text-gray-700 mb-2">每月配送 1 次</div>
                            <ul class="text-sm text-gray-600 space-y-1.5 text-left">
                                <li>• 80g 蛋白肉乾</li>
                                <li>• 30g 凍乾粉</li>
                                <li>• 綜合蔬果凍乾</li>
                            </ul>
                        </div>
                    </div>
                    <a href="subscription-packages.html" class="block w-full bg-gray-800 text-white px-6 py-3 rounded-lg font-bold hover:bg-gray-900 transition text-center">
                        選擇方案
                    </a>
                </div>
                
                <!-- 標準組 (最受歡迎) -->
                <div class="bg-white rounded-2xl shadow-2xl p-8 border-2 border-gray-200 hover:shadow-2xl transition relative transform scale-105">
                    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-1.5 text-sm font-bold rounded-full">
                        最受歡迎
                    </div>
                    <div class="text-center mb-6 pt-2">
                        <div class="text-sm text-gray-500 mb-2">CP值最高選擇</div>
                        <h3 class="text-2xl font-bold mb-4">標準組</h3>
                        <div class="text-5xl font-bold mb-1" style="color: #FF6B6B;">$599</div>
                        <div class="text-sm text-gray-500">每月計費</div>
                    </div>
                    <div class="space-y-4 mb-6">
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="text-sm font-semibold text-gray-700 mb-2">每兩週配送 (每月 1 號 & 15 號)</div>
                            <div class="text-sm text-gray-600 mb-2">→ 每次領取內容:</div>
                            <ul class="text-sm text-gray-600 space-y-1.5 text-left">
                                <li>• 50g 蛋白肉乾</li>
                                <li>• 30g 凍乾粉</li>
                                <li>• 綜合蔬果凍乾</li>
                            </ul>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                            <div class="text-xs font-bold text-yellow-700 mb-1">每月額外贈送</div>
                            <div class="text-sm text-gray-700 font-semibold">驚喜玩具 x1</div>
                        </div>
                    </div>
                    <a href="subscription-packages.html" class="block w-full text-white px-6 py-3 rounded-lg font-bold hover:opacity-90 transition text-center" style="background-color: #10B981;">
                        立即訂閱
                    </a>
                </div>
                
                <!-- 豪華組 -->
                <div class="bg-white rounded-2xl shadow-lg p-8 border-2 border-gray-200 hover:shadow-2xl transition relative">
                    <div class="text-center mb-6">
                        <div class="text-sm text-gray-500 mb-2">頂級寵愛體驗</div>
                        <h3 class="text-2xl font-bold mb-4">豪華組</h3>
                        <div class="text-5xl font-bold mb-1" style="color: #FF6B6B;">$899</div>
                        <div class="text-sm text-gray-500">每月計費</div>
                    </div>
                    <div class="space-y-4 mb-6">
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <div class="text-sm font-semibold text-gray-700 mb-2">每兩週配送 (每月 1 號 & 15 號)</div>
                            <div class="text-sm text-gray-600 mb-2">→ 每次領取內容:</div>
                            <ul class="text-sm text-gray-600 space-y-1.5 text-left">
                                <li>• 70g 蛋白肉乾</li>
                                <li>• 50g 凍乾粉</li>
                                <li>• 綜合蔬果凍乾</li>
                                <li>• 特選凍乾</li>
                            </ul>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                            <div class="text-xs font-bold text-yellow-700 mb-1">每月額外贈送</div>
                            <div class="text-sm text-gray-700 font-semibold">益智玩具 x1</div>
                        </div>
                    </div>
                    <a href="subscription-packages.html" class="block w-full bg-gray-800 text-white px-6 py-3 rounded-lg font-bold hover:bg-gray-900 transition text-center">
                        選擇方案
                    </a>
                </div>
            </div>
            
            <div class="text-center mt-12 space-y-4">
                <div class="flex flex-wrap justify-center gap-6 text-sm text-gray-600">
                    <span class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>全台免運</span>
                    <span class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>隨時調整配置</span>
                    <span class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>彈性暫停續訂</span>
                    <span class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>新鮮配送</span>
                </div>
                <p class="text-gray-600 text-sm mt-4">所有方案皆可自由選擇蛋白質（牛/雞/鴨/小魚乾）、蔬果凍乾、凍乾粉組合</p>
                <a href="subscription-packages.html" class="inline-block text-primary font-semibold hover:underline mt-4">
                    查看完整方案比較 <i class="fas fa-arrow-right ml-1"></i>
                </a>
            </div>
        </div>
    </section>
    
    <!-- Testimonials & Impact -->
    <section id="testimonials" class="py-20 bg-light">
        <div class="container mx-auto px-4">
            <!-- Testimonials -->
            <div class="mb-16">
                <h2 class="text-4xl font-bold text-center mb-12">毛爸媽真實評價</h2>
                <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                        <div class="flex items-center mb-4">
                            <img src="https://i.pravatar.cc/150?img=1" alt="User" class="w-12 h-12 rounded-full mr-3">
                            <div>
                                <h4 class="font-bold">林小姐</h4>
                                <div class="text-accent">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-700 text-sm">"我家柴柴超愛雞肉脆片！換罐計畫也很方便，洗澡還免費，真的很划算！"</p>
                    </div>
                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                        <div class="flex items-center mb-4">
                            <img src="https://i.pravatar.cc/150?img=2" alt="User" class="w-12 h-12 rounded-full mr-3">
                            <div>
                                <h4 class="font-bold">陳先生</h4>
                                <div class="text-accent">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-700 text-sm">"益智玩具讓我家 10 歲的老狗重新活力起來！看到牠開心玩耍真的很感動。"</p>
                    </div>
                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                        <div class="flex items-center mb-4">
                            <img src="https://i.pravatar.cc/150?img=3" alt="User" class="w-12 h-12 rounded-full mr-3">
                            <div>
                                <h4 class="font-bold">王小姐</h4>
                                <div class="text-accent">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-700 text-sm">"訂閱方案很彈性，而且產品品質真的很好！終於找到可以信賴的台灣品牌。"</p>
                    </div>
                </div>
            </div>
            
            <!-- Environmental Impact -->
            <div class="bg-secondary/10 rounded-3xl p-12 max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8">我們的環保成果</h2>
                <div class="grid sm:grid-cols-3 gap-8 text-center">
                    <div>
                        <div class="text-5xl font-bold text-secondary mb-2">2,580</div>
                        <p class="text-gray-700">個罐子被回收循環</p>
                    </div>
                    <div>
                        <div class="text-5xl font-bold text-secondary mb-2">3.2噸</div>
                        <p class="text-gray-700">減少塑膠包裝浪費</p>
                    </div>
                    <div>
                        <div class="text-5xl font-bold text-secondary mb-2">80%</div>
                        <p class="text-gray-700">用戶持續訂閱率</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Final CTA -->
    <section id="final-cta" class="py-20 bg-gradient-to-br from-primary to-red-600 text-white">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl md:text-5xl font-bold mb-6">現在就測測看！</h2>
            <p class="text-xl mb-12 max-w-2xl mx-auto">一起為毛孩找到最合適的飲食和生活方式</p>
            
            <div class="flex flex-col sm:flex-row justify-center gap-6">
                <a href="#quiz" class="bg-white text-primary px-10 py-5 rounded-full text-lg font-bold hover:bg-gray-100 transition transform hover:scale-105 inline-flex items-center justify-center">
                    <i class="fas fa-heart mr-2 text-2xl"></i>
                    測測毛孩適合什麼
                </a>
                <a href="products.html" class="bg-transparent border-2 border-white text-white px-10 py-5 rounded-full text-lg font-bold hover:bg-white hover:text-primary transition inline-flex items-center justify-center">
                    <i class="fas fa-shopping-bag mr-2 text-2xl"></i>
                    瀏覽所有產品
                </a>
                <a href="#crowdfunding" class="bg-accent text-dark px-10 py-5 rounded-full text-lg font-bold hover:bg-yellow-400 transition transform hover:scale-105 inline-flex items-center justify-center">
                    <i class="fas fa-hands-helping mr-2 text-2xl"></i>
                    一起支持我們
                </a>
            </div>
        </div>
    </section>
    
    <!-- 會員登入/註冊 Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md relative">
            <!-- Close Button -->
            <button onclick="closeLoginModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl">
                <i class="fas fa-times"></i>
            </button>
            
            <!-- Login Form -->
            <div id="loginForm" class="p-8">
                <div class="text-center mb-6">
                    <svg width="64" height="64" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" class="mb-3" style="max-width: 64px; max-height: 64px;">
                        <circle cx="60" cy="60" r="58" fill="#1E3A8A" stroke="#3B82F6" stroke-width="2"/>
                        <ellipse cx="60" cy="50" rx="35" ry="30" fill="#FFFFFF"/>
                        <ellipse cx="60" cy="50" rx="25" ry="20" fill="#1F2937"/>
                        <ellipse cx="60" cy="45" rx="20" ry="8" fill="#FFFFFF"/>
                        <circle cx="52" cy="48" r="3" fill="#FFFFFF"/>
                        <circle cx="68" cy="48" r="3" fill="#FFFFFF"/>
                        <ellipse cx="60" cy="55" rx="4" ry="3" fill="#1F2937"/>
                        <ellipse cx="60" cy="65" rx="6" ry="8" fill="#EC4899"/>
                    </svg>
                    <h2 class="text-3xl font-bold text-dark">會員登入</h2>
                    <p class="text-gray-600 mt-2">歡迎回到匠寵！</p>
                </div>
                
                <form onsubmit="handleLogin(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="loginEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="your@email.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">密碼</label>
                        <input type="password" id="loginPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="••••••••">
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-2 rounded">
                            <span class="text-gray-600">記住我</span>
                        </label>
                        <a href="#" class="text-primary hover:underline">忘記密碼？</a>
                    </div>
                    <button type="submit" class="w-full bg-primary text-white py-3 rounded-lg font-semibold hover:bg-red-600 transition">
                        登入
                    </button>
                </form>
                
                <div class="mt-6 text-center">
                    <p class="text-gray-600 text-sm">
                        還不是會員？
                        <button onclick="showRegisterForm()" class="text-primary font-semibold hover:underline">立即註冊</button>
                    </p>
                </div>
                
                <div class="mt-6">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-300"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-4 bg-white text-gray-500">或使用社群帳號登入</span>
                        </div>
                    </div>
                    
                    <div class="mt-4 grid grid-cols-2 gap-3">
                        <button class="flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                            <i class="fab fa-facebook text-blue-600 text-xl mr-2"></i>
                            <span class="text-sm">Facebook</span>
                        </button>
                        <button class="flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                            <i class="fab fa-google text-red-600 text-xl mr-2"></i>
                            <span class="text-sm">Google</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Register Form -->
            <div id="registerForm" class="p-8 hidden">
                <div class="text-center mb-6">
                    <svg width="64" height="64" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" class="mb-3" style="max-width: 64px; max-height: 64px;">
                        <circle cx="60" cy="60" r="58" fill="#1E3A8A" stroke="#3B82F6" stroke-width="2"/>
                        <ellipse cx="60" cy="50" rx="35" ry="30" fill="#FFFFFF"/>
                        <ellipse cx="60" cy="50" rx="25" ry="20" fill="#1F2937"/>
                        <ellipse cx="60" cy="45" rx="20" ry="8" fill="#FFFFFF"/>
                        <circle cx="52" cy="48" r="3" fill="#FFFFFF"/>
                        <circle cx="68" cy="48" r="3" fill="#FFFFFF"/>
                        <ellipse cx="60" cy="55" rx="4" ry="3" fill="#1F2937"/>
                        <ellipse cx="60" cy="65" rx="6" ry="8" fill="#EC4899"/>
                    </svg>
                    <h2 class="text-3xl font-bold text-dark">會員註冊</h2>
                    <p class="text-gray-600 mt-2">加入匠寵大家庭！</p>
                </div>
                
                <form onsubmit="handleRegister(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">姓名</label>
                        <input type="text" id="registerName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="您的姓名">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="registerEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="your@email.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">手機號碼</label>
                        <input type="tel" id="registerPhone" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="0912-345-678">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">密碼</label>
                        <input type="password" id="registerPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="至少 8 個字元">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">確認密碼</label>
                        <input type="password" id="registerConfirmPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="再次輸入密碼">
                    </div>
                    <div class="flex items-start">
                        <input type="checkbox" id="agreeTerms" required class="mt-1 mr-2 rounded">
                        <label for="agreeTerms" class="text-sm text-gray-600">
                            我同意匠寵的 <a href="#" class="text-primary hover:underline">服務條款</a> 和 <a href="#" class="text-primary hover:underline">隱私政策</a>
                        </label>
                    </div>
                    <button type="submit" class="w-full bg-primary text-white py-3 rounded-lg font-semibold hover:bg-red-600 transition">
                        註冊
                    </button>
                </form>
                
                <div class="mt-6 text-center">
                    <p class="text-gray-600 text-sm">
                        已經是會員了？
                        <button onclick="showLoginForm()" class="text-primary font-semibold hover:underline">立即登入</button>
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="bg-dark text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8 mb-8">
                <!-- Brand -->
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <svg width="40" height="40" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 flex-shrink-0">
                            <circle cx="60" cy="60" r="58" fill="#1E3A8A" stroke="#3B82F6" stroke-width="2"/>
                            <ellipse cx="60" cy="50" rx="35" ry="30" fill="#FFFFFF"/>
                            <ellipse cx="60" cy="50" rx="25" ry="20" fill="#1F2937"/>
                            <ellipse cx="60" cy="45" rx="20" ry="8" fill="#FFFFFF"/>
                            <circle cx="52" cy="48" r="3" fill="#FFFFFF"/>
                            <circle cx="68" cy="48" r="3" fill="#FFFFFF"/>
                            <ellipse cx="60" cy="55" rx="4" ry="3" fill="#1F2937"/>
                            <ellipse cx="60" cy="65" rx="6" ry="8" fill="#EC4899"/>
                        </svg>
                        <span class="text-2xl font-bold">匠寵</span>
                    </div>
                    <p class="text-gray-400 text-sm mb-4">從台灣夜市到健康餐桌，為你的毛孩提供最好的生活品質</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-primary transition">
                            <i class="fab fa-facebook text-2xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-primary transition">
                            <i class="fab fa-instagram text-2xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-primary transition">
                            <i class="fab fa-line text-2xl"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h4 class="font-bold mb-4">快速連結</h4>
                    <ul class="space-y-2">
                        <li><a href="products.html" class="text-gray-400 hover:text-primary transition">產品系列</a></li>
                        <li><a href="#crowdfunding" class="text-gray-400 hover:text-primary transition">集資項目</a></li>
                        <li><a href="#quiz" class="text-gray-400 hover:text-primary transition">智能測驗</a></li>
                        <li><a href="#jar-exchange" class="text-gray-400 hover:text-primary transition">換罐計畫</a></li>
                    </ul>
                </div>
                
                <!-- Support -->
                <div>
                    <h4 class="font-bold mb-4">客戶支援</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-primary transition">常見問題</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-primary transition">配送資訊</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-primary transition">退換貨政策</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-primary transition">聯絡我們</a></li>
                    </ul>
                </div>
                
                <!-- Contact -->
                <div>
                    <h4 class="font-bold mb-4">聯絡資訊</h4>
                    <ul class="space-y-2 text-gray-400 text-sm">
                        <li><i class="fas fa-phone mr-2"></i><span id="footerPhone">0800-123-456</span></li>
                        <li><i class="fas fa-envelope mr-2"></i><span id="footerEmail">hello@jiangchong.com</span></li>
                        <li><i class="fas fa-map-marker-alt mr-2"></i><span id="footerAddress">台北市信義區</span></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-700 pt-8 text-center text-gray-400 text-sm">
                <p id="footerCompanyName">&copy; 2024 匠寵 JiangChong. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- Custom JavaScript -->
    <script src="js/main.js"></script>
    
    <!-- Lottie Animation Initialization -->
    <script>
        // 載入狗狗動畫
        document.addEventListener('DOMContentLoaded', function() {
            const animationContainer = document.getElementById('dog-animation');
            
            if (animationContainer) {
                const animation = lottie.loadAnimation({
                    container: animationContainer,
                    renderer: 'svg',
                    loop: true,
                    autoplay: true,
                    path: 'animations/dog-begging.json'
                });
                
                console.log('🐕 狗狗動畫已載入！');
            }
            
            // Initialize Blob Animation for Handmade Snacks Section
            const blobContainer = document.querySelector('#blob-animation .w-full');
            
            if (blobContainer) {
                const blobAnimation = lottie.loadAnimation({
                    container: blobContainer,
                    renderer: 'svg',
                    loop: true,
                    autoplay: true,
                    path: 'animations/blob.json'
                });
                
                console.log('🎨 Blob 動畫背景已載入！');
            }
        });
        
        // ========== 會員登入/註冊功能 ==========
        
        // 打開登入 Modal
        function openLoginModal() {
            document.getElementById('loginModal').classList.remove('hidden');
            document.getElementById('loginModal').classList.add('flex');
            showLoginForm();
        }
        
        // 關閉登入 Modal
        function closeLoginModal() {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('loginModal').classList.remove('flex');
        }
        
        // 顯示登入表單
        function showLoginForm() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('registerForm').classList.add('hidden');
        }
        
        // 顯示註冊表單
        function showRegisterForm() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }
        
        // 處理登入
        function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // 模擬登入（實際應用中應連接後端 API）
            const userData = {
                email: email,
                name: email.split('@')[0],
                loginTime: new Date().toISOString()
            };
            
            // 儲存用戶資料到 localStorage
            localStorage.setItem('memberUser', JSON.stringify(userData));
            
            // 更新 UI
            updateUserUI(userData);
            
            // 關閉 Modal
            closeLoginModal();
            
            // 重新載入 Hero 內容（確保顯示後台設定的內容）
            setTimeout(() => {
                if (typeof loadHeroContent === 'function') {
                    loadHeroContent();
                }
                // 同時應用首頁配置
                if (window.HomepageConfig) {
                    window.HomepageConfig.applyConfigToFrontend();
                }
            }, 100);
            
            // 顯示歡迎訊息
            alert(`登入成功！\n\n歡迎回來，${userData.name}！`);
        }
        
        // 處理註冊
        function handleRegister(event) {
            event.preventDefault();
            
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('registerPhone').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            // 驗證密碼
            if (password !== confirmPassword) {
                alert('兩次輸入的密碼不一致！');
                return;
            }
            
            if (password.length < 8) {
                alert('密碼至少需要 8 個字元！');
                return;
            }
            
            // 模擬註冊（實際應用中應連接後端 API）
            const userData = {
                name: name,
                email: email,
                phone: phone,
                registerTime: new Date().toISOString()
            };
            
            // 儲存用戶資料到 localStorage
            localStorage.setItem('memberUser', JSON.stringify(userData));
            
            // 更新 UI
            updateUserUI(userData);
            
            // 關閉 Modal
            closeLoginModal();
            
            // 重新載入 Hero 內容（確保顯示後台設定的內容）
            setTimeout(() => {
                if (typeof loadHeroContent === 'function') {
                    loadHeroContent();
                }
                // 同時應用首頁配置
                if (window.HomepageConfig) {
                    window.HomepageConfig.applyConfigToFrontend();
                }
            }, 100);
            
            // 顯示歡迎訊息
            alert(`註冊成功！\n\n歡迎加入匠寵，${userData.name}！`);
        }
        
        // 更新用戶 UI
        function updateUserUI(userData) {
            // 桌面版
            const loginText = document.getElementById('login-text');
            const userName = document.getElementById('user-name');
            if (loginText && userName) {
                loginText.textContent = '';
                userName.textContent = userData.name;
                userName.classList.remove('hidden');
            }
            
            // 手機版
            const loginTextMobile = document.getElementById('login-text-mobile');
            if (loginTextMobile) {
                loginTextMobile.textContent = userData.name;
            }
            
            // 修改登入按鈕為會員中心/登出按鈕
            const loginButtons = document.querySelectorAll('[onclick="openLoginModal()"]');
            loginButtons.forEach(btn => {
                btn.onclick = showMemberMenu;
                btn.innerHTML = `<i class="fas fa-user-circle"></i> <span>${userData.name}</span>`;
            });
        }
        
        // 前往會員中心
        function goToMemberCenter() {
            window.location.href = 'member-center.html';
        }

        // 切換用戶下拉選單
        function toggleUserDropdown(event) {
            if (event) {
                event.stopPropagation();
            }
            const dropdown = document.getElementById('userDropdown');
            if (dropdown) {
                dropdown.classList.toggle('hidden');
            }
        }

        // 顯示會員選單（保留用於手機版）
        function showMemberMenu() {
            goToMemberCenter();
        }
        
        // 登出
        function logout() {
            if (confirm('確定要登出嗎？')) {
                // 清除所有會員相關數據
                localStorage.removeItem('memberUser');
                if (window.UserAuth) {
                    window.UserAuth.logout();
                } else {
                    localStorage.removeItem(CONFIG?.STORAGE_KEYS?.USER || 'jiangchong_user');
                location.reload();
                }
            }
        }

        // 導出全局函數
        window.goToMemberCenter = goToMemberCenter;
        window.toggleUserDropdown = toggleUserDropdown;
        window.logout = logout;
        
        // 頁面載入時檢查登入狀態
        window.addEventListener('DOMContentLoaded', function() {
            const memberUser = localStorage.getItem('memberUser');
            if (memberUser) {
                const userData = JSON.parse(memberUser);
                updateUserUI(userData);
            }
            
            // 應用首頁配置（顯示/隱藏 sections）
            if (window.HomepageConfig) {
                // 確保在 DOM 完全載入後再應用配置
                setTimeout(() => {
                    console.log('🔄 開始應用首頁配置...');
                window.HomepageConfig.applyConfigToFrontend();
                console.log('✅ 首頁配置已應用');
                }, 100);
            } else {
                console.error('❌ HomepageConfig 未載入，無法應用配置');
            }
            
            // 初始化產品展示和測驗區塊
            setTimeout(() => {
                console.log('🔄 開始初始化產品展示和測驗區塊...');
                
                // 首先應用產品系列內容（包括顯示/隱藏設定）
                if (window.HomepageConfig && window.HomepageConfig.applyProductsSectionContent) {
                    window.HomepageConfig.applyProductsSectionContent();
                }
                
                // 優先從配置載入自訂產品列表
                loadProductsFromConfig();
                
                // 載入測驗區塊配置
                loadQuizConfig();
                
                // 載入益智玩具系列內容配置
                loadToysSeriesContent();
                    
                    // 更新購物車數量
                if (window.FrontProducts && window.FrontProducts.updateCartCount) {
                    window.FrontProducts.updateCartCount();
                }
                    
                    // 更新收藏數量
                if (window.MemberFavorites && window.FrontProducts && window.FrontProducts.updateFavoriteCount) {
                        window.FrontProducts.updateFavoriteCount();
                    }
            }, 500);
            
            // 從配置載入產品
            async function loadProductsFromConfig() {
                try {
                    console.log('🔄 開始載入產品配置...');
                    let config = null;
                    if (window.HomepageConfig) {
                        config = window.HomepageConfig.getHomepageConfig();
                        console.log('✅ 從 HomepageConfig 獲取配置:', config);
                } else {
                        const configStr = localStorage.getItem('homepageConfig');
                        if (configStr) {
                            config = JSON.parse(configStr);
                            console.log('✅ 從 localStorage 獲取配置:', config);
                        } else {
                            console.warn('⚠️ 未找到配置');
                        }
                    }
                    
                    if (config && config.sections) {
                        const productsSection = config.sections.find(s => s.id === 'products');
                        if (productsSection && productsSection.content) {
                            const content = productsSection.content;
                            console.log('📦 產品系列配置內容:', content);
                            
                            // 根據配置顯示/隱藏系列標籤和內容
                            applySeriesVisibility(content);
                            
                            // 載入玩具產品（如果啟用）
                            if (content.showToys !== false) {
                                if (content.productsToys && Array.isArray(content.productsToys) && content.productsToys.length > 0) {
                                    await renderProductsFromConfig('toysProductsContainer', content.productsToys);
                                } else {
                                    // 如果沒有自訂列表且配置允許顯示，使用 API 載入
                                    loadToysProductsFromAPI();
                                }
                            } else {
                                // 如果玩具系列被隱藏，清空容器
                                const toysContainer = document.getElementById('toysProductsContainer');
                                if (toysContainer) {
                                    toysContainer.innerHTML = '';
                                }
                            }
                            
                            // 載入零食產品（如果啟用）
                            if (content.showSnacks !== false) {
                                if (content.productsSnacks && Array.isArray(content.productsSnacks) && content.productsSnacks.length > 0) {
                                    await renderProductsFromConfig('snacksProductsContainer', content.productsSnacks);
                                }
                            }
                            
                            // 載入訂閱產品（如果啟用）
                            if (content.showSubscription !== false) {
                                if (content.productsSubscription && Array.isArray(content.productsSubscription) && content.productsSubscription.length > 0) {
                                    await renderProductsFromConfig('subscriptionProductsContainer', content.productsSubscription);
                                } else {
                                    // 如果沒有自訂列表且配置允許顯示，使用 API 載入
                                    const subscriptionContainer = document.getElementById('subscriptionProductsContainer');
                                    if (subscriptionContainer && subscriptionContainer.children.length === 0 && window.FrontProducts && window.FrontProducts.renderProductCards) {
                                        window.FrontProducts.renderProductCards('subscriptionProductsContainer', 'subscription', 3);
                                        console.log('✅ 訂閱產品已載入（從預設）');
                                    }
                                }
                            } else {
                                // 如果訂閱系列被隱藏，清空容器
                                const subscriptionContainer = document.getElementById('subscriptionProductsContainer');
                                if (subscriptionContainer) {
                                    subscriptionContainer.innerHTML = '';
                                }
                            }
                        }
                    } else {
                        // 如果沒有配置，使用 API 載入
                        loadToysProductsFromAPI();
                    }
                } catch (error) {
                    console.error('❌ 載入產品配置失敗:', error);
                    loadToysProductsFromAPI();
                }
            }
            
            // 載入測驗區塊配置
            function loadQuizConfig() {
                try {
                    let config = null;
                    if (window.HomepageConfig) {
                        config = window.HomepageConfig.getHomepageConfig();
                    } else {
                        const configStr = localStorage.getItem('homepageConfig');
                        if (configStr) config = JSON.parse(configStr);
                    }
                    
                    if (config && config.sections) {
                        const quizSection = config.sections.find(s => s.id === 'quiz');
                        if (quizSection && quizSection.content) {
                            const content = quizSection.content;
                            
                            // 顯示/隱藏營養測驗
                            const nutritionCard = document.getElementById('nutritionQuizCard');
                            if (nutritionCard) {
                                if (content.showNutritionQuiz === false) {
                                    nutritionCard.style.display = 'none';
                                } else {
                                    nutritionCard.style.display = '';
                                }
                            }
                            
                            // 顯示/隱藏玩具測驗
                            const toyCard = document.getElementById('toyQuizCard');
                            if (toyCard) {
                                if (content.showToyQuiz === false) {
                                    toyCard.style.display = 'none';
                                } else {
                                    toyCard.style.display = '';
                                }
                            }
                            
                            // 更新標題和副標題
                            const quizSectionEl = document.getElementById('quiz');
                            if (quizSectionEl) {
                                const titleEl = quizSectionEl.querySelector('h2');
                                const subtitleEl = quizSectionEl.querySelector('p.text-xl');
                                if (titleEl && content.title) {
                                    titleEl.textContent = content.title;
                                }
                                if (subtitleEl && content.subtitle) {
                                    subtitleEl.textContent = content.subtitle;
                                }
                            }
                            
                            // 如果兩個測驗都被隱藏，隱藏整個測驗區塊
                            if (content.showNutritionQuiz === false && content.showToyQuiz === false) {
                                const quizSectionEl = document.getElementById('quiz');
                                if (quizSectionEl) {
                                    quizSectionEl.style.display = 'none';
                                }
                            }
                        }
                    }
                } catch (error) {
                    console.error('❌ 載入測驗配置失敗:', error);
                }
            }
            
            // 載入益智玩具系列內容配置
            function loadToysSeriesContent() {
                try {
                    let config = null;
                    if (window.HomepageConfig) {
                        config = window.HomepageConfig.getHomepageConfig();
                    } else {
                        const configStr = localStorage.getItem('homepageConfig');
                        if (configStr) config = JSON.parse(configStr);
                    }
                    
                    if (config && config.sections) {
                        const productsSection = config.sections.find(s => s.id === 'products');
                        if (productsSection && productsSection.content) {
                            const content = productsSection.content;
                            
                            // 更新益智玩具系列的標題
                            const toysTab = document.getElementById('tab-toys');
                            if (toysTab && content.toysTitle) {
                                const titleEl = toysTab.querySelector('h3');
                                if (titleEl) {
                                    titleEl.textContent = content.toysTitle;
                                }
                            }
                            
                            // 更新描述
                            if (toysTab && content.toysDescription) {
                                const descEl = toysTab.querySelector('p.text-lg');
                                if (descEl) {
                                    descEl.textContent = content.toysDescription;
                                }
                            }
                            
                            // 更新研究證實文字
                            if (toysTab && content.toysResearchText) {
                                const researchEl = toysTab.querySelector('.bg-white\\/80.backdrop-blur p.text-sm.text-gray-600');
                                if (researchEl) {
                                    researchEl.textContent = content.toysResearchText;
                                }
                            }
                            
                            // 更新風險提示文字
                            if (toysTab && content.toysRiskText) {
                                const riskEl = toysTab.querySelector('.bg-white\\/80.backdrop-blur p.text-sm.text-gray-700');
                                if (riskEl && riskEl.querySelector('strong')) {
                                    riskEl.innerHTML = `<i class="fas fa-exclamation-circle text-red-500 mr-2"></i>${content.toysRiskText}`;
                                }
                            }
                            
                            // 更新 CTA 按鈕
                            if (toysTab && content.toysCtaText) {
                                const ctaEl = toysTab.querySelector('a[href*="quiz-toy"]');
                                if (ctaEl) {
                                    ctaEl.textContent = content.toysCtaText;
                                    if (content.toysCtaLink) {
                                        ctaEl.href = content.toysCtaLink;
                                    }
                                }
                            }
                        }
                    }
                } catch (error) {
                    console.error('❌ 載入益智玩具系列內容失敗:', error);
                }
            }
            
            // 根據配置應用系列顯示/隱藏
            function applySeriesVisibility(content) {
                console.log('🔄 應用系列顯示設定:', content);
                
                // 獲取所有標籤按鈕和內容區塊
                const tabs = {
                    toys: {
                        tab: document.querySelector('button[data-tab="toys"]'),
                        content: document.getElementById('tab-toys')
                    },
                    snacks: {
                        tab: document.querySelector('button[data-tab="snacks"]'),
                        content: document.getElementById('tab-snacks')
                    },
                    subscription: {
                        tab: document.querySelector('button[data-tab="subscription"]'),
                        content: document.getElementById('tab-subscription')
                    }
                };
                
                console.log('📋 找到的標籤元素:', {
                    toys: { tab: !!tabs.toys.tab, content: !!tabs.toys.content },
                    snacks: { tab: !!tabs.snacks.tab, content: !!tabs.snacks.content },
                    subscription: { tab: !!tabs.subscription.tab, content: !!tabs.subscription.content }
                });
                
                // 應用顯示/隱藏設定
                if (content.showToys === false) {
                    console.log('❌ 隱藏益智玩具系列');
                    if (tabs.toys.tab) {
                        tabs.toys.tab.style.display = 'none';
                        tabs.toys.tab.classList.add('hidden');
                    }
                    if (tabs.toys.content) {
                        tabs.toys.content.style.display = 'none';
                        tabs.toys.content.classList.add('hidden');
                    }
                } else {
                    console.log('✅ 顯示益智玩具系列');
                    if (tabs.toys.tab) {
                        tabs.toys.tab.style.display = '';
                        tabs.toys.tab.classList.remove('hidden');
                    }
                    if (tabs.toys.content) {
                        tabs.toys.content.style.display = '';
                        tabs.toys.content.classList.remove('hidden');
                    }
                }
                
                if (content.showSnacks === false) {
                    console.log('❌ 隱藏手作零食系列');
                    if (tabs.snacks.tab) {
                        tabs.snacks.tab.style.display = 'none';
                        tabs.snacks.tab.classList.add('hidden');
                    }
                    if (tabs.snacks.content) {
                        tabs.snacks.content.style.display = 'none';
                        tabs.snacks.content.classList.add('hidden');
                    }
                } else {
                    console.log('✅ 顯示手作零食系列');
                    if (tabs.snacks.tab) {
                        tabs.snacks.tab.style.display = '';
                        tabs.snacks.tab.classList.remove('hidden');
                    }
                    if (tabs.snacks.content) {
                        tabs.snacks.content.style.display = '';
                        tabs.snacks.content.classList.remove('hidden');
                    }
                }
                
                if (content.showSubscription === false) {
                    console.log('❌ 隱藏訂閱系列');
                    if (tabs.subscription.tab) {
                        tabs.subscription.tab.style.display = 'none';
                        tabs.subscription.tab.classList.add('hidden');
                    }
                    if (tabs.subscription.content) {
                        tabs.subscription.content.style.display = 'none';
                        tabs.subscription.content.classList.add('hidden');
                    }
                } else {
                    console.log('✅ 顯示訂閱系列');
                    if (tabs.subscription.tab) {
                        tabs.subscription.tab.style.display = '';
                        tabs.subscription.tab.classList.remove('hidden');
                    }
                    if (tabs.subscription.content) {
                        tabs.subscription.content.style.display = '';
                        tabs.subscription.content.classList.remove('hidden');
                    }
                }
                
                // 如果當前活動的標籤被隱藏，自動切換到第一個可見的標籤
                const visibleTabs = Object.entries(tabs).filter(([key, value]) => {
                    const showKey = `show${key.charAt(0).toUpperCase() + key.slice(1)}`;
                    const shouldShow = content[showKey] !== false;
                    const isVisible = value.tab && value.tab.style.display !== 'none' && !value.tab.classList.contains('hidden');
                    return shouldShow && isVisible;
                });
                
                console.log('📋 可見的標籤:', visibleTabs.map(([key]) => key));
                
                if (visibleTabs.length > 0) {
                    const firstVisibleTab = visibleTabs[0][0];
                    const firstTabButton = tabs[firstVisibleTab].tab;
                    if (firstTabButton) {
                        // 觸發點擊事件切換到第一個可見標籤
                        setTimeout(() => {
                            console.log('🔄 自動切換到第一個可見標籤:', firstVisibleTab);
                            firstTabButton.click();
                        }, 100);
                    }
                } else {
                    console.warn('⚠️ 沒有任何可見的標籤！');
                }
            }
            
            // 從配置渲染產品
            async function renderProductsFromConfig(containerId, productList) {
                const container = document.getElementById(containerId);
                if (!container) return;
                
                try {
                    // 如果 productList 是產品對象數組，需要從 API 獲取完整產品資料
                    let products = [];
                    
                    if (productList.length > 0) {
                        // 如果是產品對象（來自配置），提取 ID 列表
                        const productIds = productList
                            .filter(p => p.enabled !== false)
                            .map(p => typeof p === 'object' ? p.id : p);
                        
                        // 從 API 獲取完整產品資料
                        if (window.ApiClient && typeof window.ApiClient.getProducts === 'function') {
                            const response = await window.ApiClient.getProducts({ limit: 100 });
                            if (response && response.success && response.data && response.data.products) {
                                // 按照配置中的順序排列產品
                                products = productIds.map(id => 
                                    response.data.products.find(p => p.id === id)
                                ).filter(p => p);
                            }
                        }
                    }
                    
                    if (containerId === 'toysProductsContainer') {
                        renderToysProducts(products);
                        console.log('✅ 從配置載入', products.length, '個玩具產品');
                    } else if (containerId === 'snacksProductsContainer') {
                        // 使用 FrontProducts 渲染（需要改進為完整卡片）
                        if (window.FrontProducts && window.FrontProducts.renderProductCards) {
                            window.FrontProducts.renderProductCards(containerId, 'snacks', products.length);
                        } else {
                            renderToysProducts(products); // 暫時使用相同的渲染函數
                        }
                        console.log('✅ 從配置載入', products.length, '個零食產品');
                    } else if (containerId === 'subscriptionProductsContainer') {
                        renderToysProducts(products); // 暫時使用相同的渲染函數
                        console.log('✅ 從配置載入', products.length, '個訂閱產品');
                    }
                } catch (error) {
                    console.error('❌ 渲染產品失敗:', error);
                }
            }
            
            // 從 API 載入玩具產品（當 FrontProducts 未載入時）
            async function loadToysProductsFromAPI() {
                try {
                    if (window.ApiClient && typeof window.ApiClient.getProducts === 'function') {
                        console.log('📡 從 API 載入玩具產品...');
                        const response = await window.ApiClient.getProducts({ limit: 100 });
                        if (response && response.success && response.data && response.data.products) {
                            const toysProducts = response.data.products
                                .filter(p => p.category === 'toys' && p.status === 'active')
                                .sort((a, b) => (b.salesCount || 0) - (a.salesCount || 0))
                                .slice(0, 3);
                            
                            renderToysProducts(toysProducts);
                            console.log('✅ 已載入', toysProducts.length, '個玩具產品');
                        }
                    }
                } catch (error) {
                    console.error('❌ 載入玩具產品失敗:', error);
                    const container = document.getElementById('toysProductsContainer');
                    if (container) {
                        container.innerHTML = `
                            <div class="col-span-full text-center py-12">
                                <p class="text-gray-500 mb-2">暫無玩具產品</p>
                                <p class="text-sm text-gray-400">請在後台產品管理中新增玩具產品</p>
                            </div>
                        `;
                    }
                }
            }
            
            // 渲染玩具產品卡片
            function renderToysProducts(products) {
                const container = document.getElementById('toysProductsContainer');
                if (!container) return;
                
                if (products.length === 0) {
                    container.innerHTML = `
                        <div class="col-span-full text-center py-12">
                            <p class="text-gray-500 mb-2">暫無玩具產品</p>
                            <p class="text-sm text-gray-400">請在後台產品管理中新增玩具產品</p>
                            <a href="admin-products.html" class="mt-4 inline-block text-primary hover:underline">
                                <i class="fas fa-external-link-alt mr-1"></i>前往後台新增產品
                            </a>
                        </div>
                    `;
                    return;
                }
                
                // 難度等級對應
                const difficultyMap = {
                    'toy-snuffle-mat': { label: '初級', color: 'bg-green-500' },
                    'toy-puzzle-slider': { label: '中級', color: 'bg-yellow-500' },
                    'toy-memory-buttons': { label: '高級', color: 'bg-red-500' }
                };
                
                container.innerHTML = products.map(product => {
                    const difficulty = difficultyMap[product.id] || { label: '熱銷', color: 'bg-blue-500' };
                    // 轉義特殊字符，避免 XSS 和安全問題
                    const safeName = String(product.name || '').replace(/'/g, '&#39;').replace(/"/g, '&quot;');
                    const safeDesc = String(product.description || '').replace(/'/g, '&#39;').replace(/"/g, '&quot;');
                    const safeImageUrl = String(product.imageUrl || 'https://via.placeholder.com/400').replace(/'/g, '&#39;');
                    const productId = String(product.id || '').replace(/'/g, '&#39;');
                    const productPrice = parseFloat(product.price) || 0;
                    
                    return `
                        <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition cursor-pointer" onclick="window.location.href='product-detail.html?id=${productId}'">
                            <div class="relative">
                                <img src="${safeImageUrl}" alt="${safeName}" class="w-full h-48 object-cover" onerror="this.src='https://via.placeholder.com/400'">
                                <div class="absolute top-4 right-4 ${difficulty.color} text-white px-3 py-1 rounded-full text-xs font-semibold">
                                    ${difficulty.label}
                                </div>
                            </div>
                            <div class="p-6">
                                <h4 class="text-xl font-bold mb-2">${safeName}</h4>
                                <p class="text-gray-600 text-sm mb-4">${safeDesc}</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-2xl font-bold" style="color: #FF8C42;">NT$ ${productPrice.toLocaleString()}</span>
                                    <button onclick="event.stopPropagation(); handleAddToCart('${productId}', '${safeName}', ${productPrice}, '${safeImageUrl}');" class="bg-orange-400 text-white px-4 py-2 rounded-full hover:bg-orange-500 transition text-sm">
                                        <i class="fas fa-shopping-cart mr-1"></i>加入購物車
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            // 處理加入購物車（暴露到全局作用域）
            window.handleAddToCart = function(productId, productName, price, imageUrl) {
                if (window.addToCart && typeof window.addToCart === 'function') {
                    window.addToCart(productId, productName, price, imageUrl || '', 1);
                    // 顯示通知
                    if (window.localCart && typeof window.localCart.showAddToCartNotification === 'function') {
                        window.localCart.showAddToCartNotification(productName, price);
                    } else if (window.showNotification && typeof window.showNotification === 'function') {
                        window.showNotification(productName + ' 已加入購物車！', 'success');
                    } else {
                        alert(productName + ' 已加入購物車！');
                    }
                    // 更新購物車數量
                    if (window.localCart && typeof window.localCart.updateCartUI === 'function') {
                        window.localCart.updateCartUI();
                    }
                } else if (window.localCart && typeof window.localCart.addItem === 'function') {
                    window.localCart.addItem(productId, productName, price, imageUrl || '', 1);
                    window.localCart.showAddToCartNotification(productName, price);
                    window.localCart.updateCartUI();
                } else {
                    alert('購物車系統載入中，請稍候再試');
                }
            };
            
            // 載入並應用 Hero 內容（延遲載入，確保所有腳本都已載入）
            setTimeout(() => {
                loadHeroContent();
            }, 100);
            
            // 監聽配置更新事件
            // 監聽同頁面的配置更新事件
            window.addEventListener('homepageConfigUpdated', function(event) {
                console.log('🔄 收到首頁配置更新事件（同頁面），重新載入所有配置...', event.detail);
                reloadHomepageConfig();
            });
            
            // 監聽跨分頁的 localStorage 變化（當後台在其他分頁修改配置時）
            window.addEventListener('storage', function(event) {
                if (event.key === 'homepageConfig' || event.key === 'homepageConfigTimestamp') {
                    console.log('🔄 檢測到 localStorage 配置變化（跨分頁），重新載入所有配置...', event.key);
                    reloadHomepageConfig();
                }
            });
            
            // 統一的重載配置函數
            function reloadHomepageConfig() {
                console.log('🔄 開始重新載入首頁配置...');
                if (window.HomepageConfig) {
                    // 先應用產品系列內容（包括顯示/隱藏設定）
                    if (window.HomepageConfig.applyProductsSectionContent) {
                        window.HomepageConfig.applyProductsSectionContent();
                    }
                    // 然後應用整體配置
                    window.HomepageConfig.applyConfigToFrontend();
                    console.log('✅ 配置已重新應用');
                }
                // 重新載入產品配置和測驗配置
                setTimeout(() => {
                    loadProductsFromConfig();
                    loadQuizConfig();
                    loadToysSeriesContent();
                }, 100);
                
                setTimeout(() => {
                    loadHeroContent();
                }, 100);
            }
            
            // 初始化時應用產品系列內容
            setTimeout(() => {
                if (window.HomepageConfig && window.HomepageConfig.applyProductsSectionContent) {
                    window.HomepageConfig.applyProductsSectionContent();
                }
            }, 500);
        });
        
        // 載入 Hero 內容（暴露到全局，供登入後調用）
        function loadHeroContent() {
            try {
                console.log('🔍 開始載入 Hero 內容...');
                
                let heroContent = null;
                
                // 方法1: 優先從 HomepageConfig 載入
                if (window.HomepageConfig && typeof window.HomepageConfig.getHomepageConfig === 'function') {
                    try {
                        const config = window.HomepageConfig.getHomepageConfig();
                        console.log('📋 從 HomepageConfig 載入配置:', config);
                        
                        if (config && config.sections && Array.isArray(config.sections)) {
                            const heroSection = config.sections.find(s => s.id === 'hero');
                            console.log('🎯 Hero Section:', heroSection);
                            
                            if (heroSection && heroSection.content) {
                                heroContent = heroSection.content;
                                console.log('✅ 從 HomepageConfig 找到 Hero 內容:', heroContent);
                            } else {
                                console.warn('⚠️ Hero Section 沒有 content');
                            }
                        } else {
                            console.warn('⚠️ 配置中沒有 sections 或 sections 不是數組');
                        }
                    } catch (e) {
                        console.error('❌ 從 HomepageConfig 載入失敗:', e);
                    }
                } else {
                    console.warn('⚠️ HomepageConfig 未載入或 getHomepageConfig 不可用');
                }
                
                // 方法2: 如果方法1失敗，直接從 localStorage 讀取 homepageConfig
                if (!heroContent) {
                    try {
                        const homepageConfigStr = localStorage.getItem('homepageConfig');
                        if (homepageConfigStr) {
                            console.log('📦 從 localStorage 直接讀取 homepageConfig');
                            const config = JSON.parse(homepageConfigStr);
                            if (config && config.sections && Array.isArray(config.sections)) {
                                const heroSection = config.sections.find(s => s.id === 'hero');
                                if (heroSection && heroSection.content) {
                                    heroContent = heroSection.content;
                                    console.log('✅ 從 localStorage 找到 Hero 內容:', heroContent);
                                }
                            }
                        }
                    } catch (e) {
                        console.error('❌ 從 localStorage 讀取失敗:', e);
                    }
                }
                
                // 方法3: 如果還是沒有，回退到 heroContent
                if (!heroContent) {
                    const heroContentStr = localStorage.getItem('heroContent');
                    if (heroContentStr) {
                        console.log('📦 從 localStorage 載入 heroContent');
                        try {
                            heroContent = JSON.parse(heroContentStr);
                            console.log('✅ 從 heroContent 找到內容:', heroContent);
                        } catch (e) {
                            console.error('❌ 解析 heroContent 失敗:', e);
                        }
                    } else {
                        console.log('ℹ️ 沒有找到保存的 Hero 內容，使用預設值');
                    }
                }
                
                // 如果有內容，更新
                if (heroContent) {
                    console.log('🚀 開始更新 Hero 內容:', heroContent);
                    updateHeroContent(heroContent);
                } else {
                    console.log('ℹ️ 沒有 Hero 內容可更新，使用預設值');
                }
            } catch (error) {
                console.error('❌ 載入 Hero 內容失敗:', error);
            }
        }
        
        // 更新 Hero 內容
        function updateHeroContent(heroContent) {
            if (!heroContent) {
                console.warn('⚠️ heroContent 為空，無法更新');
                return;
            }
            
            console.log('🔄 開始更新 Hero 內容:', heroContent);
            
            // 更新標題
            const heroTitleEl = document.getElementById('heroTitle');
            if (heroTitleEl) {
                if (heroContent.title) {
                    heroTitleEl.textContent = heroContent.title;
                    console.log('✅ 標題已更新:', heroContent.title);
                } else {
                    console.warn('⚠️ 沒有標題內容');
                }
            } else {
                console.error('❌ 找不到 heroTitle 元素');
            }
            
            // 更新副標題
            const heroSubtitleEl = document.getElementById('heroSubtitle');
            if (heroSubtitleEl) {
                if (heroContent.subtitle) {
                    heroSubtitleEl.textContent = heroContent.subtitle;
                    console.log('✅ 副標題已更新:', heroContent.subtitle);
                } else {
                    console.warn('⚠️ 沒有副標題內容');
                }
            } else {
                console.error('❌ 找不到 heroSubtitle 元素');
            }
            
            // 更新按鈕文字和連結
            const btnPrimary = document.getElementById('btnPrimary');
            if (btnPrimary) {
                if (heroContent.ctaText) {
                    const span = btnPrimary.querySelector('span');
                    if (span) {
                        span.textContent = heroContent.ctaText;
                        console.log('✅ 按鈕文字已更新:', heroContent.ctaText);
                    }
                }
                if (heroContent.ctaLink) {
                    btnPrimary.href = heroContent.ctaLink;
                    console.log('✅ 按鈕連結已更新:', heroContent.ctaLink);
                }
            } else {
                console.error('❌ 找不到 btnPrimary 元素');
            }
            
            // 更新背景圖片
            const heroSection = document.getElementById('hero');
            if (heroSection) {
                if (heroContent.bgImage) {
                    // 檢查是否是 IndexedDB 引用
                    if (heroContent.bgImage.startsWith('indexeddb://')) {
                        const imageId = heroContent.bgImage.replace('indexeddb://', '');
                        loadImageFromIndexedDB(imageId).then(imageData => {
                            heroSection.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('${imageData}')`;
                            console.log('✅ 背景圖片已從 IndexedDB 載入');
                        }).catch(error => {
                            console.warn('⚠️ 無法從 IndexedDB 載入圖片:', error);
                            // 使用預設圖片
                            heroSection.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1548199973-03cce0bbc87b')`;
                        });
                    } else {
                        // 直接使用 URL 或 Base64
                        heroSection.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('${heroContent.bgImage}')`;
                        console.log('✅ 背景圖片已更新');
                    }
                } else {
                    // 如果沒有背景圖片，使用預設樣式
                    heroSection.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1548199973-03cce0bbc87b')`;
                    console.log('ℹ️ 使用預設背景圖片');
                }
            } else {
                console.error('❌ 找不到 hero 元素');
            }
            
            console.log('✅ Hero 內容更新完成');
        }
        
        // 從 IndexedDB 讀取圖片（首頁使用）
        function loadImageFromIndexedDB(imageId) {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open('HeroImagesDB', 1);
                
                request.onsuccess = (event) => {
                    const db = event.target.result;
                    const transaction = db.transaction(['images'], 'readonly');
                    const store = transaction.objectStore('images');
                    const getRequest = store.get(imageId);
                    
                    getRequest.onsuccess = () => {
                        if (getRequest.result) {
                            resolve(getRequest.result.data);
                        } else {
                            reject('圖片不存在');
                        }
                    };
                    
                    getRequest.onerror = () => {
                        reject('讀取失敗');
                    };
                };
                
                request.onerror = () => {
                    reject('IndexedDB 不可用');
                };
                
                request.onupgradeneeded = (event) => {
                    const db = event.target.result;
                    if (!db.objectStoreNames.contains('images')) {
                        db.createObjectStore('images', { keyPath: 'id' });
                    }
                };
            });
        }
        
        // 暴露 loadHeroContent 到全局，供登入後調用
        window.loadHeroContent = loadHeroContent;
    </script>
    
    <!-- Content Sync System -->
    <script src="js/content-sync.js"></script>
</body>
</html>
