# ğŸš€ Railway éƒ¨ç½²å•é¡Œä¿®å¾©æŒ‡å—

## âŒ å•é¡Œæè¿°

Railway é¡¯ç¤ºéŒ¯èª¤ï¼š
```
No start command was found
```

## ğŸ” åŸå› åˆ†æ

ä½ çš„é …ç›®çµæ§‹æ˜¯ï¼š
```
webapp/
â”œâ”€â”€ backend/          â† å¾Œç«¯ä»£ç¢¼åœ¨é€™è£¡
â”‚   â”œâ”€â”€ server.js
â”‚   â”œâ”€â”€ package.json  â† æœ‰ "start" script
â”‚   â””â”€â”€ ...
â”œâ”€â”€ index.html        â† å‰ç«¯æ–‡ä»¶åœ¨æ ¹ç›®éŒ„
â”œâ”€â”€ package.json      â† å‰ç«¯çš„ package.json
â””â”€â”€ ...
```

**å•é¡Œ**ï¼šRailway é è¨­åœ¨æ ¹ç›®éŒ„å°‹æ‰¾ï¼Œä½†ä½ çš„å¾Œç«¯åœ¨ `backend/` å­ç›®éŒ„ä¸­ã€‚

---

## âœ… è§£æ±ºæ–¹æ¡ˆï¼ˆ3 ç¨®æ–¹æ³•ï¼‰

### æ–¹æ³• 1: ä½¿ç”¨ Railway é…ç½®æ–‡ä»¶ï¼ˆæ¨è–¦ï¼‰âœ¨

**æˆ‘å·²ç¶“ç‚ºä½ å‰µå»ºäº†å…©å€‹é…ç½®æ–‡ä»¶ï¼š**

#### 1ï¸âƒ£ `railway.toml`
```toml
[build]
builder = "nixpacks"
buildCommand = "cd backend && npm install"

[deploy]
startCommand = "cd backend && npm start"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10
```

#### 2ï¸âƒ£ `nixpacks.json`
```json
{
  "providers": ["node"],
  "phases": {
    "setup": {
      "nixPkgs": ["nodejs_20"]
    },
    "install": {
      "cmds": [
        "cd backend && npm install"
      ]
    },
    "start": {
      "cmd": "cd backend && npm start"
    }
  }
}
```

**é€™äº›æ–‡ä»¶æœƒå‘Šè¨´ Railway å¾Œç«¯ä»£ç¢¼åœ¨ `backend/` ç›®éŒ„ä¸­ã€‚**

---

### æ–¹æ³• 2: åœ¨ Railway Dashboard è¨­ç½®

å¦‚æœé…ç½®æ–‡ä»¶ä¸ç”Ÿæ•ˆï¼Œå¯ä»¥åœ¨ Railway Dashboard æ‰‹å‹•è¨­ç½®ï¼š

#### æ­¥é©Ÿï¼š

1. **é€²å…¥ä½ çš„å¾Œç«¯æœå‹™ï¼ˆp.et-taiwanï¼‰**

2. **é»æ“Š "Settings" æ¨™ç±¤**

3. **æ‰¾åˆ° "Build & Deploy" æˆ– "Deploy" å€åŸŸ**

4. **è¨­ç½®ä»¥ä¸‹å…§å®¹**ï¼š

   **Root Directoryï¼ˆæ ¹ç›®éŒ„ï¼‰**ï¼š
   ```
   backend
   ```

   **Build Commandï¼ˆæ§‹å»ºå‘½ä»¤ï¼‰**ï¼š
   ```
   npm install
   ```

   **Start Commandï¼ˆå•Ÿå‹•å‘½ä»¤ï¼‰**ï¼š
   ```
   npm start
   ```

5. **é»æ“Š "Save" ä¿å­˜**

6. **é‡æ–°éƒ¨ç½²æœå‹™**

---

### æ–¹æ³• 3: ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼ˆæœ€ç°¡å–®ï¼‰

åœ¨ Railway çš„ç’°å¢ƒè®Šæ•¸ä¸­æ·»åŠ ï¼š

```
è®Šæ•¸åç¨±: NIXPACKS_START_CMD
è®Šæ•¸å€¼: cd backend && npm start
```

æˆ–ï¼š

```
è®Šæ•¸åç¨±: NIXPACKS_INSTALL_CMD
è®Šæ•¸å€¼: cd backend && npm install
```

---

## ğŸ“‹ æ¨è–¦åŸ·è¡Œæ­¥é©Ÿ

### æ­¥é©Ÿ 1: æäº¤é…ç½®æ–‡ä»¶åˆ° Git

**æˆ‘å·²ç¶“å‰µå»ºäº†é…ç½®æ–‡ä»¶ï¼Œç¾åœ¨éœ€è¦æäº¤åˆ° Gitï¼š**

```bash
# æŸ¥çœ‹æ–°å¢çš„æ–‡ä»¶
git status

# æ·»åŠ é…ç½®æ–‡ä»¶
git add railway.toml nixpacks.json

# æäº¤
git commit -m "æ·»åŠ  Railway éƒ¨ç½²é…ç½®æ–‡ä»¶"

# æ¨é€åˆ°é ç«¯
git push
```

### æ­¥é©Ÿ 2: åœ¨ Railway è§¸ç™¼é‡æ–°éƒ¨ç½²

1. é€²å…¥ Railway Dashboard
2. é¸æ“‡å¾Œç«¯æœå‹™ï¼ˆp.et-taiwanï¼‰
3. é»æ“Š "Deployments" æ¨™ç±¤
4. é»æ“Š "Redeploy" æŒ‰éˆ•

### æ­¥é©Ÿ 3: æŸ¥çœ‹éƒ¨ç½²æ—¥èªŒ

éƒ¨ç½²æ™‚æ‡‰è©²æœƒçœ‹åˆ°ï¼š
```
âœ… æª¢æ¸¬åˆ° railway.toml é…ç½®
ğŸ“¦ æ­£åœ¨å®‰è£ä¾è³´...
   cd backend && npm install
âœ… ä¾è³´å®‰è£å®Œæˆ
ğŸš€ å•Ÿå‹•æœå‹™...
   cd backend && npm start
```

---

## ğŸ”„ å¦‚æœé…ç½®æ–‡ä»¶ä¸ç”Ÿæ•ˆ

### å‚™é¸æ–¹æ¡ˆï¼šåœ¨ Railway Dashboard æ‰‹å‹•è¨­ç½®

1. **é€²å…¥æœå‹™ Settings**

2. **æ‰¾åˆ° "Service Settings" æˆ– "Build Settings"**

3. **è¨­ç½® Root Directory**ï¼š
   - åœ¨ "Root Directory" æˆ– "Working Directory" æ¬„ä½è¼¸å…¥ï¼š`backend`

4. **æˆ–è¨­ç½®å®Œæ•´çš„å•Ÿå‹•å‘½ä»¤**ï¼š
   - åœ¨ "Start Command" æ¬„ä½è¼¸å…¥ï¼š`cd backend && npm start`

5. **ä¿å­˜ä¸¦é‡æ–°éƒ¨ç½²**

---

## âœ… é©—è­‰æˆåŠŸçš„æ¨™èªŒ

éƒ¨ç½²æˆåŠŸå¾Œï¼Œæ—¥èªŒæ‡‰è©²é¡¯ç¤ºï¼š

```
âœ… å·²é€£æ¥åˆ° PostgreSQL è³‡æ–™åº«
ğŸ“Š è³‡æ–™åº«é¡å‹: postgresql
ğŸ” ä½¿ç”¨ PostgreSQL è³‡æ–™åº«...
âœ… PostgreSQL é€£æ¥æ± å·²å»ºç«‹
ğŸ“Š é–‹å§‹å»ºç«‹ PostgreSQL è³‡æ–™è¡¨...
   âœ… users å»ºç«‹æˆåŠŸ
   âœ… products å»ºç«‹æˆåŠŸ
   âœ… product_variants å»ºç«‹æˆåŠŸ
   âœ… orders å»ºç«‹æˆåŠŸ
   âœ… order_items å»ºç«‹æˆåŠŸ
   âœ… quiz_results å»ºç«‹æˆåŠŸ
   âœ… subscriptions å»ºç«‹æˆåŠŸ
   âœ… cart_items å»ºç«‹æˆåŠŸ
   âœ… settings å»ºç«‹æˆåŠŸ
   âœ… coupons å»ºç«‹æˆåŠŸ
   âœ… coupon_usage å»ºç«‹æˆåŠŸ
âœ… PostgreSQL è³‡æ–™åº«è¡¨çµæ§‹åˆå§‹åŒ–å®Œæˆ
ğŸš€ åŒ å¯µå¾Œç«¯æœå‹™å™¨å·²å•Ÿå‹•
   ç›£è½ç«¯å£: 3000
```

---

## ğŸ› å¸¸è¦‹å•é¡Œ

### å•é¡Œ 1: é…ç½®æ–‡ä»¶æ²’æœ‰ç”Ÿæ•ˆ

**è§£æ±ºæ–¹æ³•**ï¼š
1. ç¢ºèªé…ç½®æ–‡ä»¶å·²æäº¤åˆ° Git ä¸¦æ¨é€
2. ç¢ºèªæ–‡ä»¶åœ¨é …ç›®æ ¹ç›®éŒ„ï¼ˆä¸æ˜¯ backend/ ç›®éŒ„å…§ï¼‰
3. é‡æ–°éƒ¨ç½²æœå‹™

### å•é¡Œ 2: ä»ç„¶æ‰¾ä¸åˆ°å•Ÿå‹•å‘½ä»¤

**è§£æ±ºæ–¹æ³•**ï¼š
1. ä½¿ç”¨æ–¹æ³• 2ï¼šåœ¨ Dashboard æ‰‹å‹•è¨­ç½® Root Directory
2. æˆ–åœ¨ Settings ä¸­è¨­ç½®å®Œæ•´çš„å•Ÿå‹•å‘½ä»¤ï¼š`cd backend && npm start`

### å•é¡Œ 3: npm install å¤±æ•—

**è§£æ±ºæ–¹æ³•**ï¼š
1. ç¢ºèª `backend/package.json` å­˜åœ¨
2. ç¢ºèªæ‰€æœ‰ä¾è³´éƒ½æœ‰æ­£ç¢ºçš„ç‰ˆæœ¬è™Ÿ
3. æŸ¥çœ‹è©³ç´°çš„éŒ¯èª¤æ—¥èªŒ

---

## ğŸ“ é …ç›®çµæ§‹èªªæ˜

```
webapp/                    â† Railway éƒ¨ç½²çš„æ ¹ç›®éŒ„
â”œâ”€â”€ railway.toml          â† âœ¨ Railway é…ç½®ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ nixpacks.json         â† âœ¨ Nixpacks é…ç½®ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ backend/              â† å¾Œç«¯ä»£ç¢¼ç›®éŒ„
â”‚   â”œâ”€â”€ server.js         â† å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json      â† å¾Œç«¯ä¾è³´
â”‚   â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ routes/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ index.html            â† å‰ç«¯æ–‡ä»¶
â”œâ”€â”€ package.json          â† å‰ç«¯ä¾è³´ï¼ˆTailwind ç­‰ï¼‰
â””â”€â”€ ...
```

**é…ç½®æ–‡ä»¶çš„ä½œç”¨**ï¼š
- `railway.toml` - å‘Šè¨´ Railway å¦‚ä½•æ§‹å»ºå’Œå•Ÿå‹•
- `nixpacks.json` - å‘Šè¨´ Nixpacksï¼ˆRailway çš„æ§‹å»ºç³»çµ±ï¼‰å¦‚ä½•è™•ç†

---

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œ

1. âœ… **æäº¤é…ç½®æ–‡ä»¶åˆ° Git**ï¼ˆæˆ‘å·²å‰µå»ºï¼‰
2. âœ… **æ¨é€åˆ°é ç«¯å€‰åº«**
3. âœ… **åœ¨ Railway é‡æ–°éƒ¨ç½²**
4. âœ… **ç¢ºèªç’°å¢ƒè®Šæ•¸å·²è¨­ç½®**ï¼ˆDB_TYPE, NODE_ENV, JWT_SECRETï¼‰
5. âœ… **æŸ¥çœ‹éƒ¨ç½²æ—¥èªŒç¢ºèªæˆåŠŸ**

---

## ğŸ’¡ æç¤º

å¦‚æœä½ æƒ³åˆ†é–‹éƒ¨ç½²å‰ç«¯å’Œå¾Œç«¯ï¼š

1. **å¾Œç«¯æœå‹™ï¼ˆp.et-taiwanï¼‰**ï¼š
   - ä½¿ç”¨ `backend/` ç›®éŒ„
   - é…ç½®å¦‚ä¸Šæ‰€ç¤º

2. **å‰ç«¯æœå‹™ï¼ˆå¦å¤–å‰µå»ºï¼‰**ï¼š
   - ä½¿ç”¨æ ¹ç›®éŒ„çš„å‰ç«¯æ–‡ä»¶
   - éƒ¨ç½²ç‚ºéœæ…‹ç«™é»

ä½†ç›®å‰ä½ åªéœ€è¦å¾Œç«¯æœå‹™é‹è¡Œå³å¯ï¼

---

**æº–å‚™å¥½æäº¤é…ç½®æ–‡ä»¶äº†å—ï¼Ÿ** ğŸš€

éœ€è¦æˆ‘å¹«ä½ åŸ·è¡Œ Git æäº¤å‘½ä»¤å—ï¼Ÿ
