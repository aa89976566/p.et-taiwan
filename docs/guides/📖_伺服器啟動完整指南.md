# 📖 伺服器啟動完整指南

**日期**: 2024-12-21  
**適用於**: 匠寵網站專案

---

## 🎯 概述

這個專案需要啟動兩個伺服器：
1. **前端伺服器** - 運行在 `http://localhost:8080`
2. **後端伺服器** - 運行在 `http://localhost:3000`

---

## 🚀 方法一：使用腳本啟動（最簡單）

### 啟動前端伺服器

1. **打開終端機（Terminal）**

2. **進入專案目錄**：
```bash
cd "/Users/ming/Desktop/keyboard clicking/p.et/網站"
```

3. **執行啟動腳本**：
```bash
chmod +x 啟動前端服務器.sh
./啟動前端服務器.sh
```

4. **看到以下訊息表示成功**：
```
🚀 啟動前端服務器...
✅ 使用 python3 啟動服務器
📍 服務地址: http://localhost:8080
按 Ctrl+C 停止服務器
```

5. **打開瀏覽器訪問**：`http://localhost:8080`

### 啟動後端伺服器

1. **打開新的終端機視窗**（保持前端伺服器運行）

2. **進入後端目錄**：
```bash
cd "/Users/ming/Desktop/keyboard clicking/p.et/網站/backend"
```

3. **執行啟動腳本**：
```bash
chmod +x 啟動服務器.sh
./啟動服務器.sh
```

4. **或者手動啟動**：
```bash
npm start
```

5. **看到以下訊息表示成功**：
```
✅ 已連接到 SQLite 資料庫
🚀 伺服器運行在 http://localhost:3000
```

---

## 🛠️ 方法二：手動啟動（詳細步驟）

### 步驟 1: 啟動前端伺服器

#### 使用 Python（推薦）

1. **打開終端機**

2. **進入專案目錄**：
```bash
cd "/Users/ming/Desktop/keyboard clicking/p.et/網站"
```

3. **檢查 Python 是否安裝**：
```bash
python3 --version
```

4. **啟動伺服器**：
```bash
python3 -m http.server 8080
```

5. **成功訊息**：
```
Serving HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...
```

#### 使用 Node.js（替代方案）

如果沒有 Python，可以使用 Node.js：

```bash
npx http-server -p 8080
```

### 步驟 2: 啟動後端伺服器

1. **打開新的終端機視窗**

2. **進入後端目錄**：
```bash
cd "/Users/ming/Desktop/keyboard clicking/p.et/網站/backend"
```

3. **檢查 Node.js 是否安裝**：
```bash
node --version
npm --version
```

4. **安裝依賴**（如果還沒安裝）：
```bash
npm install
```

5. **檢查環境變數**：
```bash
ls -la .env
```

如果沒有 `.env` 檔案，需要建立：
```bash
cp .env.example .env
# 然後編輯 .env 檔案，填入綠界 API 資訊
```

6. **初始化資料庫**（如果還沒初始化）：
```bash
npm run init-db
```

7. **啟動伺服器**：
```bash
npm start
```

或使用開發模式（自動重啟）：
```bash
npm run dev
```

8. **成功訊息**：
```
✅ 已連接到 SQLite 資料庫
🚀 伺服器運行在 http://localhost:3000
```

---

## ✅ 驗證伺服器是否運行

### 檢查前端伺服器

1. **打開瀏覽器**
2. **訪問**：`http://localhost:8080`
3. **應該看到網站首頁**

### 檢查後端伺服器

1. **打開瀏覽器**
2. **訪問**：`http://localhost:3000/api/health`
3. **應該看到**：`{"status":"ok"}`

或使用終端機：
```bash
curl http://localhost:3000/api/health
```

---

## 🔧 常見問題

### 問題 1: 端口已被占用

**錯誤訊息**：
```
Address already in use
```

**解決方法**：

**前端（端口 8080）**：
```bash
# 查找占用端口的程序
lsof -i :8080

# 關閉占用端口的程序
lsof -ti :8080 | xargs kill -9
```

**後端（端口 3000）**：
```bash
# 查找占用端口的程序
lsof -i :3000

# 關閉占用端口的程序
lsof -ti :3000 | xargs kill -9
```

### 問題 2: Python 未安裝

**錯誤訊息**：
```
command not found: python3
```

**解決方法**：

**macOS**：
```bash
# 使用 Homebrew 安裝
brew install python3
```

**或使用 Node.js**：
```bash
npx http-server -p 8080
```

### 問題 3: Node.js 未安裝

**錯誤訊息**：
```
command not found: node
```

**解決方法**：

**macOS**：
```bash
# 使用 Homebrew 安裝
brew install node
```

**或下載安裝程式**：
- 訪問：https://nodejs.org/
- 下載並安裝 LTS 版本

### 問題 4: 後端依賴未安裝

**錯誤訊息**：
```
Cannot find module 'express'
```

**解決方法**：
```bash
cd backend
npm install
```

### 問題 5: 資料庫未初始化

**錯誤訊息**：
```
SQLITE_ERROR: no such table: users
```

**解決方法**：
```bash
cd backend
npm run init-db
```

### 問題 6: 環境變數未設定

**錯誤訊息**：
```
ECPAY_MERCHANT_ID is not defined
```

**解決方法**：
```bash
cd backend
cp .env.example .env
# 編輯 .env 檔案，填入綠界 API 資訊
```

---

## 📋 快速檢查清單

### 啟動前檢查

- [ ] Python 3 或 Node.js 已安裝
- [ ] 後端依賴已安裝（`npm install`）
- [ ] 資料庫已初始化（`npm run init-db`）
- [ ] 環境變數已設定（`.env` 檔案存在）
- [ ] 端口 8080 和 3000 未被占用

### 啟動後檢查

- [ ] 前端伺服器運行在 `http://localhost:8080`
- [ ] 後端伺服器運行在 `http://localhost:3000`
- [ ] 可以訪問網站首頁
- [ ] 可以訪問後端健康檢查端點

---

## 🎯 完整啟動流程（一次完成）

### 終端機 1 - 前端伺服器

```bash
# 1. 進入專案目錄
cd "/Users/ming/Desktop/keyboard clicking/p.et/網站"

# 2. 啟動前端伺服器
./啟動前端服務器.sh

# 或手動啟動
python3 -m http.server 8080
```

### 終端機 2 - 後端伺服器

```bash
# 1. 進入後端目錄
cd "/Users/ming/Desktop/keyboard clicking/p.et/網站/backend"

# 2. 檢查依賴（首次需要）
npm install

# 3. 檢查資料庫（首次需要）
npm run init-db

# 4. 啟動後端伺服器
npm start

# 或使用開發模式
npm run dev
```

---

## 🛑 停止伺服器

### 停止前端伺服器

在運行前端伺服器的終端機中：
- 按 `Ctrl + C`

### 停止後端伺服器

在運行後端伺服器的終端機中：
- 按 `Ctrl + C`

---

## 📝 重要提示

1. **兩個伺服器都需要運行**：
   - 前端伺服器：提供網站頁面
   - 後端伺服器：提供 API 功能

2. **保持終端機視窗開啟**：
   - 關閉終端機視窗會停止伺服器

3. **開發模式 vs 生產模式**：
   - 開發模式（`npm run dev`）：自動重啟，適合開發
   - 生產模式（`npm start`）：穩定運行，適合測試

4. **首次啟動需要**：
   - 安裝依賴：`npm install`
   - 初始化資料庫：`npm run init-db`
   - 設定環境變數：建立 `.env` 檔案

---

## 🚀 快速啟動命令（複製貼上）

### 一鍵啟動前端

```bash
cd "/Users/ming/Desktop/keyboard clicking/p.et/網站" && python3 -m http.server 8080
```

### 一鍵啟動後端

```bash
cd "/Users/ming/Desktop/keyboard clicking/p.et/網站/backend" && npm start
```

---

## 📞 需要幫助？

如果遇到問題：

1. **查看終端機錯誤訊息**
2. **檢查瀏覽器控制台**（F12）
3. **確認所有依賴已安裝**
4. **確認端口未被占用**

---

**更新日期**: 2024-12-21  
**最後更新**: 2024-12-21



